/*
 Zoomify Image Viewer, version on line 16 below. Copyright Zoomify, Inc., 1999-2017. All rights reserved. You may
use this file on private and public websites, for personal and commercial purposes, so long as this notice is included. Redistribution
via other means is not permitted without prior permission. Additional terms apply. For complete license terms please see the
Zoomify License Agreement on the Zoomify website at www.zoomify.com/zoomifyLicenseAgreement.htm.
::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::
*/
(function(){(function(){return this}).call().Z={}})();Z.version="4.2 FreeEdition";Z.setCallback=function(a,b){"undefined"===typeof Z.callbacks&&(Z.callbacks=[]);var c=Z.Utils.arrayIndexOfObjectTwoValues(Z.callbacks,"callbackEvent",a,null,"callbackFunction",b);-1==c&&(c=Z.callbacks.length);Z.callbacks[c]={callbackEvent:a,callbackFunction:b}};
Z.showImage=function(a,b,c){Z.showImage.done||(Z.showImage.done=!0,Z.Utils.addCrossBrowserMethods(),Z.Utils.addCrossBrowserEvents(),Z.Utils.declareGlobals(),Z.pageContainerID=a,Z.clearCallback=function(a,b){var c=Z.Utils.arrayIndexOfObjectTwoValues(Z.callbacks,"callbackEvent",a,null,"callbackFunction",b);-1!=c&&(Z.callbacks=Z.Utils.arraySplice(Z.callbacks,c,1))},"undefined"!==typeof b&&Z.Utils.stringValidate(b)?Z.imagePath=Z.Utils.stringRemoveTrailingSlashCharacters(b):Z.imagePath=null,"complete"!=
document.readyState?(Z.Utils.addEventListener(document,"DOMContentLoaded",Z.initialize),Z.Utils.addEventListener(window,"load",Z.initialize)):Z.initialize())};Z.initialize=function(){Z.Utils.removeEventListener(document,"DOMContentLoaded",Z.initialize);Z.Utils.removeEventListener(window,"load",Z.initialize);Z.Utils.detectBrowserFeatures();Z.Utils.setParameters();Z.Viewer=new Z.ZoomifyImageViewer;Z.Viewer.configureViewer()};
Z.ZoomifyImageViewer=function(){function a(){document.getElementsByTagName("body")?document.getElementsByTagName("body")[0].onorientationchange=b:window.setTimeout(a,100)}function b(a){}function c(a){a=Z.Utils.event(a);18==a.keyCode||a.altKey||Z.viewportCurrent.zoomAndPanAllStop(!0,!0);if(a){var b=a.type;a=a.keyCode;if("keydown"==b)switch(Z.keyIsDown=!0,a){case 90:Z.viewportCurrent.zoom("out");break;case 17:Z.viewportCurrent.zoom("out");break;case 65:Z.viewportCurrent.zoom("in");break;case 16:Z.viewportCurrent.zoom("in");
break;case 37:Z.viewportCurrent.pan("left");break;case 38:Z.viewportCurrent.pan("up");break;case 40:Z.viewportCurrent.pan("down");break;case 39:Z.viewportCurrent.pan("right");break;case 27:Z.viewportCurrent.reset()}else if("keyup"==b)if(Z.keyIsDown=!1,90==a||17==a||65==a||16==a)Z.viewportCurrent.zoom("stop");else if(37==a||39==a||38==a||40==a)37==a||39==a?Z.viewportCurrent.pan("horizontalStop"):38!=a&&40!=a||Z.viewportCurrent.pan("verticalStop")}}function d(a){a=Z.Utils.event(a);var b=a.type;if(a&&
b){var c=Z.Utils.isRightMouseButton(a),d=a.altKey;if(!("mouseover"!=b&&"mouseout"!=b&&!Z.interactive||"mousedown"==b&&(!Z.interactive||Z.coordinatesVisible&&d)||c)){Z.touchSupport&&"touchmove"!=b&&"gesturechange"!=b&&a.preventDefault();switch(b){case "mouseover":Z.Viewer.initializeViewerKeyDefaultListeners(!0);break;case "mouseout":Z.Viewer.initializeViewerKeyDefaultListeners(!1)}var d=Z.Utils.event(a),f=d.type;if(d&&f){var n;a=Z.Utils.target(d);c=Z.Utils.relatedTarget(d);"resize"!=f&&(n=Z.Utils.getMousePosition(d));
var p=d.altKey;"DOMMouseScroll"==f&&(f="mousewheel");switch(f){case "mouseover":d=Z.Utils.nodeIsInViewer(a);f=Z.Utils.nodeIsInViewer(c);d&&f||(Z.Toolbar.show(!0),Z.mouseOutDownPoint=null);break;case "mouseout":d=Z.Utils.nodeIsInViewer(a);f=Z.Utils.nodeIsInViewer(c);d&&f||"[object HTMLSelectElement]"==a||"[object HTMLOptionElement]"==a||"[object HTMLSelectElement]"==c||"[object HTMLOptionElement]"==c||(Z.mouseIsDown?Z.mouseOutDownPoint=new Z.Utils.Point(n.x,n.y):Z.Toolbar.show(!1));break;case "mousewheel":0<
Z.mouseWheel&&Z.viewportCurrent.mouseWheelHandler(Math.max(-1,Math.min(1,d.wheelDelta||-d.detail)),p)}}if("mousedown"==b||"mousemove"==b)return!1}}}var f=this,h=[];Z.ViewerDisplay=Z.Utils.createContainerElement("div","ViewerDisplay","inline-block","relative","hidden","100%","100%","0px","0px","none","0px","transparent none","0px","0px","normal","pointer");Z.pageContainer=document.getElementById(Z.pageContainerID);Z.Utils.getElementStyle(Z.pageContainer);Z.ViewerDisplay.style["-webkit-touch-callout"]=
"none";Z.ViewerDisplay.style["-moz-user-select"]="none";Z.ViewerDisplay.style["-khtml-user-select"]="none";Z.ViewerDisplay.style["-webkit-user-select"]="none";Z.ViewerDisplay.style["-ms-user-select"]="none";Z.ViewerDisplay.style["-o-user-select"]="none";Z.ViewerDisplay.style["user-select"]="none";var u=Z.Utils.getContainerSize(Z.pageContainer,Z.ViewerDisplay);Z.viewerW=u.x;Z.viewerH=u.y;Z.pageContainer.innerHTML="";Z.pageContainer.appendChild(Z.ViewerDisplay);Z.mouseWheelCompleteDuration=parseInt(Z.Utils.getResource("z165"),
10);this.configureViewer=function(){if(!Z.Viewer.getStatus("configureCalled")){var b=function(){Z.clearCallback(c,b);f.initializeViewerKeyEventListeners(!0);Z.Utils.addEventListener(Z.ViewerDisplay,"mouseover",d);Z.Utils.addEventListener(Z.ViewerDisplay,"mouseout",d);Z.Utils.addEventListener(Z.ViewerDisplay,"mousemove",Z.Utils.preventDefault);Z.Utils.addEventListener(Z.ViewerDisplay,"mousewheel",d);Z.Utils.addEventListener(Z.ViewerDisplay,"mousewheel",Z.Utils.preventDefault);a();Z.Toolbar=new Z.ZoomifyToolbar(Z.viewportCurrent)};
Z.Viewer.setStatus("configureCalled",!0);var c=Z.imageSet?"initializedViewer":"initializedViewport";Z.setCallback(c,b);Z.Viewport=new Z.ZoomifyViewport;Z.viewportCurrent=Z.Viewport}};this.z759=function(a,b,c,d,f){Z.viewerW=a;Z.viewerH=b;Z.ViewerDisplay.style.width=a+"px";Z.ViewerDisplay.style.height=b+"px";Z.Viewport&&Z.Viewport.getStatus("initializedViewport")&&Z.Viewport.z759(a,b,c,d);b-=Z.toolbarH;Z.ToolbarDisplay&&Z.Toolbar.z747()&&(Z.Toolbar.z759(a,null,null,b),Z.Toolbar.show(!0));f&&Z.Viewport.updateView(!0)};
this.getStatus=function(a){a=Z.Utils.arrayIndexOfObjectValue(h,"state",a);return-1==a?!1:h[a].status};this.setStatus=function(a,b){var c=!1,d=Z.Utils.arrayIndexOfObjectValue(h,"state",a);-1==d?(c=b,h[h.length]={state:a,status:b}):(!h[d].status&&b&&(c=!0),h[d].status=b);c&&(Z.Utils.validateCallback(a),f.validateViewerReady(a))};this.validateViewerStatus=function(a){var b=a.indexOf("Viewport");-1!=b&&(a=a.substring(0,b));f.setStatus(a+"Viewer",!0)};this.validateViewerReady=function(a){a=Z.Viewport&&
Z.Viewport&&Z.Viewport.getStatus("initializedViewport")&&Z.Viewport.getStatus("precacheLoadedViewport")&&Z.Viewport.getStatus("backfillLoadedViewport")&&Z.Viewport.getStatus("backfillDrawnViewport")&&Z.Viewport.getStatus("displayLoadedViewport")&&Z.Viewport.getStatus("displayDrawnViewport");var b=0==Z.ToolbarVisible||Z.Toolbar&&Z.Toolbar.z747();(a=a&&b)&&Z.Viewer.setStatus("readyViewer",!0);return a};this.initializeViewerKeyEventListeners=function(a){a?(Z.Utils.addEventListener(document,"keydown",
c),Z.Utils.addEventListener(document,"keyup",c)):(Z.Utils.removeEventListener(document,"keydown",c),Z.Utils.removeEventListener(document,"keyup",c))};this.initializeViewerKeyDefaultListeners=function(a){a?(Z.Utils.addEventListener(document,"keydown",Z.Utils.preventDefault),Z.Utils.addEventListener(document,"keyup",Z.Utils.preventDefault)):(Z.Utils.removeEventListener(document,"keydown",Z.Utils.preventDefault),Z.Utils.removeEventListener(document,"keyup",Z.Utils.preventDefault))};this.z586=function(a){Z.mouseWheelIsDown=
!1;Z.mouseWheelCompleteTimer&&(window.clearTimeout(Z.mouseWheelCompleteTimer),Z.mouseWheelCompleteTimer=null,Z.zooming="stop",Z.viewportCurrent.updateView(!0))}};
Z.ZoomifyViewport=function(a,b,c,d,f,h){function u(a,b,l,e,c,d,f,Mc,p,h,t){Z.useCanvas&&(y&&(T=y.getContext("2d")),Na=C.getContext("2d"),U=H.getContext("2d"),$a=da.getContext("2d"));Z.imageW=a;Z.imageH=b;Z.imageCtrX=Z.imageW/2;Z.imageCtrY=Z.imageH/2;Z.imageD=Math.round(Math.sqrt(a*a+b*b));xb=c;Aa=l;Ba=e;a=Z.imageW;for(b=Z.imageH;a>Aa||b>Ba;)a/=2,b/=2,na++;a=Z.imageW;b=Z.imageH;l=0;for(e=na-1;0<=e;e--)oa[e]=a,Ca[e]=b,ja[e]=Math.ceil(oa[e]/Aa),pa[e]=Math.ceil(Ca[e]/Ba),Wa[e]=ja[e]*pa[e],a/=2,b/=2,l+=
Wa[e];if(l!=xb&&("ZoomifyImageFolder"==Z.tileSource||"ZoomifyImageFile"==Z.tileSource||"ZoomifyPFFFile"==Z.tileSource)){oa=[];Ca=[];ja=[];pa=[];na=1;a=Z.imageW;b=Z.imageH;for(l=2;a>Aa||b>Ba;)a=Math.floor(Z.imageW/l),b=Math.floor(Z.imageH/l),l*=2,a%2&&a++,b%2&&b++,na++;a=Z.imageW;b=Z.imageH;l=2;tileCounter=0;for(e=na-1;0<=e;e--)ja[e]=Math.floor(a/Aa),a%Aa&&ja[e]++,pa[e]=Math.floor(b/Ba),b%Ba&&pa[e]++,Wa[e]=ja[e]*pa[e],tileCounter+=Wa[e],oa[e]=a,Ca[e]=b,a=Math.floor(Z.imageW/l),b=Math.floor(Z.imageH/
l),l*=2,a%2&&a++,b%2&&b++;a=tileCounter;a!=xb&&Z.Utils.showMessage(Z.Utils.getResource("z254"),!1,Z.messageDurationStandard,"center")}E(D,B,Zb,$b);k.validateXYZDefaults();na>ac?(aa=qa(ra,Z.initialZ),y&&T.scale(aa,aa)):T=ab=y=null;Da=qa(M,Z.initialZ);Oa=F=qa(v,Z.initialZ);if(Z.useCanvas)try{U.scale(F,F)}catch(vc){console.log("In function z751Continue scaling canvas:  "+vc)}k.z619();l=Z.initialX;e=Z.initialY;a=Z.initialZ;b=Z.initialR;if("undefined"===typeof l||null===l)l=Z.imageW/2;if("undefined"===
typeof e||null===e)e=Z.imageH/2;"undefined"===typeof a||null===a?a=Z.fitZ:1<a&&a>Z.maxZ&&(a/=100);if("undefined"===typeof b||null===b)b=Z.imageR;a=gb(a);l=Pa(l,e,a,b,"image");Z.imageX=yb=l.x;Z.imageY=zb=l.y;Z.imageZ=a;b!=Z.imageR&&Z.Utils.rotateElement(q,b);Z.imageR=b;k.updateView(!0);Z.Utils.addEventListener(z,"mousedown",ka);Z.Utils.addEventListener(z,"mousemove",Z.Utils.preventDefault);Z.Utils.addEventListener(z,"touchstart",ka);Z.Utils.addEventListener(z,"touchmove",ka);Z.Utils.addEventListener(z,
"touchend",ka);Z.Utils.addEventListener(z,"touchcancel",ka);Z.Utils.addEventListener(z,"gesturestart",ka);Z.Utils.addEventListener(z,"gesturechange",ka);Z.Utils.addEventListener(z,"gestureend",ka);Z.Utils.addEventListener(C,"contextmenu",Z.Utils.preventDefault);Z.Utils.addEventListener(H,"contextmenu",Z.Utils.preventDefault);k.setStatus("initializedViewport",!0)}function n(){na=1;M=v=0;Ab=Bb=Cb=N=!1;"undefined"!==typeof oa&&Z.Utils.arrayClear(oa);"undefined"!==typeof Ca&&Z.Utils.arrayClear(Ca);"undefined"!==
typeof ja&&Z.Utils.arrayClear(ja);"undefined"!==typeof pa&&Z.Utils.arrayClear(pa);"undefined"!==typeof Wa&&Z.Utils.arrayClear(Wa)}function E(a,b,l,e){if("undefined"===typeof l||null===l)l=0;if("undefined"===typeof e||null===e)e=0;Z.viewerW=D=a;Z.viewerH=B=b;I=D*bc;J=B*bc;a=wc;b=2*Z.imageW;var g=2*Z.imageH;I>a&&(I=a);J>a&&(J=a);I>b&&(I=b);J>g&&(J=g);I<D&&(I=D);J<B&&(J=B);Ea=Z.Utils.roundToFixed(I/2,4);Fa=Z.Utils.roundToFixed(J/2,4);P=Z.Utils.roundToFixed(-((I-D)/2)+l,4);Z.Utils.roundToFixed((I-D)/
2+l,4);Q=Z.Utils.roundToFixed(-((J-B)/2)+e,4);Z.Utils.roundToFixed((J-B)/2+e,4);y&&(y.width=D,y.height=B,ab.width=D+"px",ab.height=B+"px",ab.left="0px",ab.top="0px");z.width=I;z.height=J;q.width=I+"px";q.height=J+"px";q.left=P+"px";q.top=Q+"px";H.width=I;H.height=J;V.width=I+"px";V.height=J+"px";if(Z.useCanvas){y&&(T.translate(D/2,B/2),T.save());try{U.translate(Ea,Fa)}catch(tc){console.log("In function z759 scaling canvas:  "+tc)}U.save()}}function S(a,b,l){a=Z.Utils.cacheProofPath(a+"/ImageProperties.xml");
b.loadXML(a,l)}function O(a,b){n();if("undefined"===typeof k.getStatus)window.setTimeout(function(){O(a,b)},100);else{var g=null,e=null,m=null,c=null,d=null,f=null,g=parseInt(a.documentElement.getAttribute("WIDTH"),10),e=parseInt(a.documentElement.getAttribute("HEIGHT"),10),d=parseInt(a.documentElement.getAttribute("NUMTILES"),10);parseInt(a.documentElement.getAttribute("NUMIMAGES"),10);f=parseInt(a.documentElement.getAttribute("VERSION"),10);m=c=parseInt(a.documentElement.getAttribute("TILESIZE"),
10);!isNaN(g)&&0<g&&!isNaN(e)&&0<e&&!isNaN(m)&&0<m&&!isNaN(c)&&0<c&&0<d?k.getStatus("initializedViewport")||u(g,e,m,c,d,f,null,null,null,null,null,b):Z.Utils.showMessage(Z.Utils.getResource("z252"),!1,Z.messageDurationStandard,"center")}}function r(a,b){for(var g=ja[a]-1,e=pa[a]-1,m=0;m<=g;m++)for(var c=0;c<=e;c++)b[b.length]=a+"-"+m+"-"+c}function A(a){if(a){a=k.z542(M);Z.Utils.arrayClear(W);Z.Utils.arrayClear(Ga);b=a.l;for(g=a.r;b<=g;b++)for(e=a.t,c=a.b;e<=c;e++)d=M+"-"+b+"-"+e,Ga[Ga.length]=d,
W[W.length]=d;t(W,Xa,"simple","image-backfill")}else{Z.Utils.arrayClear(Ha);Z.Utils.arrayClear(Ia);Z.Utils.arrayClear(ta);Z.Utils.arrayClear(K);a=k.z542();for(var b=a.l,g=a.r;b<=g;b++)for(var e=a.t,c=a.b;e<=c;e++){var d=v+"-"+b+"-"+e;Ha[Ha.length]=d;K[K.length]=d}if(k.getStatus("initializedViewport")&&0<X.length&&(v==qb||v==rb||v==hb))for(b=0,g=X.length;b<g;b++)(e=X[b])&&e.t==v&&e.c>=a.l&&e.c<=a.r&&e.r>=a.t&&e.r<=a.b&&(ta[ta.length]=e.name,Ia[Ia.length]=e,c=Z.Utils.arrayIndexOf(K,e.name),-1!=c&&(K=
Z.Utils.arraySplice(K,c,1)));b=0;for(g=Y.length;b<g;b++)(e=Y[b])&&e.t==v&&e.c>=a.l&&e.c<=a.r&&e.r>=a.t&&e.r<=a.b&&(c=Z.Utils.arrayIndexOf(ta,e.name),-1==c&&(ta[ta.length]=e.name,Ia[Ia.length]=e),e=Z.Utils.arrayIndexOf(K,e.name),-1!=e&&(K=Z.Utils.arraySplice(K,e,1)));if(0!=sb){b=0;for(g=sa.length;b<g;b++)e=sa[b],e.alpha=1;Z.Utils.arrayClear(sa);Z.Utils.arrayClear(Qa)}k.traceDebugValues("tilesToDisplay",null,Ha.length,Ha);k.traceDebugValues("tilesInCache",null,ta.length,ta);k.traceDebugValues("tilesToLoad",
null,K.length,K)}}function p(a,b,l,e,c,d){c||Z.Utils.clearDisplay(a);if("canvasCopy"==e)Z.Utils.clearDisplay(H),U.restore(),U.save(),U.scale(1,1),U.drawImage(da,-Ea,-Fa),U.restore(),U.save(),U.scale(F,F);else{c=k.z542(b);d=[];if(null===l)for(var g=0,m=Ia.length;g<m;g++)d[g]=Ia[g];else if(0<l.length)for(g=0,m=l.length;g<m;g++){var f=l[g];f&&f.t==b&&(b==M&&!N||f.c>=c.l&&f.c<=c.r&&f.r>=c.t&&f.r<=c.b)&&(d[d.length]=l[g])}if(0<d.length)if(k.traceDebugValues("z622-"+a.id,null,null,d),"centerOut"==e)for(g=
Math.floor(d.length/2),m=d.length;g<m;g++)R(a,b,d[g]),d.length-g-1!=g&&R(a,b,d[d.length-g-1]);else for(g=0,m=d.length;g<m;g++)R(a,b,d[g]);else k.traceDebugValues("No cached tiles in view");k.traceDebugValues("blankLine")}}function ba(a,b){var g=k.z542();syncTransitionCanvas();for(var e=0,m=b.length;e<m;e++){var c=b[e];c&&c.t==a&&(a==M||c.c>=g.l&&c.c<=g.r&&c.r>=g.t&&c.r<=g.b)&&R(da,a,c)}}function t(a,b,l,e){var g="undefined"!==typeof e&&null!==e?"-"+e:"";if(0<a.length){k.traceDebugValues("z577"+g,
null,null,a);g=(new Date).getTime();if("centerOut"==l&&4<a.length){var m=[],c=0,d=0,f=0,p=0;for(l=0;l<a.length;l++){var h=a[l];h&&(h=new w(h,e),m[m.length]=h,0==l?(c=d=h.c,f=p=h.r):(h.c<c?c=h.c:h.c>d&&(d=h.c),h.r<f?f=h.r:h.r>p&&(p=h.r)))}a=c+(d-c)/2;e=f+(p-f)/2;for(l=0;l<m.length;l++)m[l].r-=e,m[l].c-=a;m.sort(function(a,b){return a.r*a.r+a.c*a.c-(b.r*b.r+b.c*b.c)});for(l=0;l<m.length;l++)m[l].r+=e,m[l].c+=a,tb(m[l],g,b)}else for(l=0,m=a.length;l<m;l++)if(h=a[l])h=new w(h,e),tb(h,g,b);k.traceDebugValues("blankLine")}else k.traceDebugValues("z577"+
g,"No new tiles requested")}function w(a,b){this.imagePath=Z.imagePath;this.name=a;var g=new L(a);this.t=g.t;this.c=g.c;this.r=g.r;this.x=Math.floor(this.c*Aa);this.y=Math.floor(this.r*Ba);this.image=null;this.alpha=0;this.url=k.formatTilePath(this.t,this.c,this.r,b);this.style=this.elmt=this.loadTime=null}function L(a){this.t=parseInt(a.substring(0,a.indexOf("-")),10);this.c=parseInt(a.substring(a.indexOf("-")+1,a.lastIndexOf("-")),10);this.r=parseInt(a.substring(a.lastIndexOf("-")+1),10)}function tb(a,
b,l){var g=a.name,m;if(l==ib)m="image-display";else if(l==Xa||l==z599ToSave)m="image-backfill";var c=a.t==qb&&Cb||a.t==rb&&Bb||a.t==hb&&Ab;"image-display"==m&&c||(a.loadTime=b,k.traceDebugValues("z581-"+m,g),xc.loadImage(a.url,Z.Utils.createCallback(null,l,a),m,a))}function ib(a,b){if(a&&b&&a.imagePath==Z.imagePath){a.image=b;var g=a.name,e=Z.Utils.arrayIndexOf(K,g);if(-1!=e){K=Z.Utils.arraySplice(K,e,1);yc(a);-1==Z.Utils.arrayIndexOf(Qa,g)&&(Qa[Qa.length]=g,sa[sa.length]=a);ub||(ub=window.setInterval(ua,
50));sb=K.length;if(0==sb)for(Z.useCanvas&&0<bb&&(Db?(ba(v,Y),p(H,v,Y,"canvasCopy",!1,"4. Updating view: all new tiles loaded"),window.setTimeout(function(){Z.Utils.clearDisplay(da)},200),Db=!1):p(H,v,Y,"centerOut",!1,"4. Updating view: all new tiles loaded"));va.length>bb&&Y.length>bb;)va=Z.Utils.arraySplice(va,0,1),Y=Z.Utils.arraySplice(Y,0,1);k.traceDebugValues("z755",a.name,a.loadTime)}Eb==Fb+cb&&k.setStatus("displayLoadedViewport",!0)}else"undefined"!==typeof b&&null!==b||console.log(Z.Utils.getResource("z280")+
a.name+".jpg")}function Xa(a,b){if(a&&b&&a.imagePath==Z.imagePath){a.image=b;var g=a.name;X[X.length]=a;g=Z.Utils.arrayIndexOf(W,g);-1!=g&&(W=Z.Utils.arraySplice(W,g,1));a.alpha=1;a.t==M&&R(C,M,a);k.traceDebugValues("onTileBackfillPrecache",a.name);cc==dc&&k.setStatus("precacheLoadedViewport",!0);k.traceDebugValues("z599",a.name);Gb<=0+ec&&k.setStatus("backfillLoadedViewport",!0);a.t==v&&ib(a,b)}else if("undefined"===typeof b||null===b)Z.mobileDevice?console.log(Z.Utils.getResource("z280")+a.name+
".jpg"):Z.Utils.showMessage(Z.Utils.getResource("z280")+a.name+".jpg")}function ua(){for(var a=0,b=0,l=sa.length;b<l;b++){var e=sa[b];e.t==v?(Z.fadeIn&&0!=Hb&&1>e.alpha+Hb?e.alpha+=Hb:(e.alpha=1,a++),R(H,v,e),a>=l&&(window.clearInterval(ub),ub=null,b=l)):(sa=Z.Utils.arraySplice(sa,b,1),Qa=Z.Utils.arraySplice(Qa,b,1),e=Z.Utils.arrayIndexOf(K,e.name),-1!=e&&(K=Z.Utils.arraySplice(K,e,1)),l--)}}function R(a,b,l){if("z647"!=l.url.substr(0,8)&&0!=l.image.width&&0!=l.image.height){var g=l.x,m=l.y;b=ea(b,
1);aa=qa(ra,k.getZoom());var c=8<aa;Z.useCanvas&&(a==H||a==da||a==C&&N?(g-=Z.imageX*b,m-=Z.imageY*b):a==y&&(N||c)&&(c=k.calculateCurrentCenterCoordinates(),g-=c.x*b,m-=c.y*b),b=a.getContext("2d"),Z.alphaSupported&&1>l.alpha&&"transitionCanvas"!=a.id&&-1==a.id.indexOf("oversizeDisplay")&&(b.globalAlpha=l.alpha),b.drawImage(l.image,g,m),Z.alphaSupported&&1>l.alpha&&"transitionCanvas"!=a.id&&-1==a.id.indexOf("oversizeDisplay")&&(b.globalAlpha=1));a==H?(k.traceDebugValues("z507",l.name),Eb==Ib&&k.setStatus("displayDrawnViewport",
!0)):(k.traceDebugValues("displayBackfillTile",l.name),Gb<=fc&&k.setStatus("backfillDrawnViewport",!0))}}function wa(a,b){var g=ea(b,1),e=Math.floor(a.l*g/Aa),c=Math.floor(a.r*g/Aa),m=Math.floor(a.t*g/Ba),g=Math.floor(a.b*g/Ba);0>e&&(e=0);c>ja[b]-1&&(c=ja[b]-1);0>m&&(m=0);g>pa[b]-1&&(g=pa[b]-1);this.l=e;this.r=c;this.t=m;this.b=g}function zc(a,b,l,e,c,d,f,k,h){"undefined"===typeof k||null===k?(this.l=a+l/f,this.r=a+e/f,this.t=b+c/f,this.b=b+d/f):(f=D/oa[k],k=B/Ca[k],this.l=a+l*f,this.r=a+e*f,this.t=
b+c*k,this.b=b+d*k);h&&(this.l-=256-this.l%256,this.r+=256-this.r%256,this.t-=256-this.t%256,this.b+=256-this.b%256)}function ea(a,b){return oa[a]/Z.imageW*b}function qa(a,b){return b/(oa[a]/Z.imageW)}function Pa(a,b,l,e,c){if(Z.z744){l="undefined"!==typeof l&&null!==l?l:Z.imageZ;e="undefined"!==typeof e&&null!==e?Math.round(e):Math.round(Z.imageR);0>e&&(e+=360);var g=a,d=b;"image"==c&&(b=k.convertImageCoordsToViewportEdgeCoords(a,b,l,e),a=b.x,b=b.y);var m=Math.round(Z.imageW*l),f=Math.round(Z.imageH*
l),h=D,za=B,p=Math.round(.5*D),q=Math.round(.5*B),t,n;t=p-P+(Z.imageCtrX-Z.imageX)*l+a;n=q-Q+(Z.imageCtrY-Z.imageY)*l+b;var w=t-m/2;t+=m/2;var r=n-f/2;n+=f/2;a=t-w>h||!Z.z744Strict?w>p?a-(w-p):t<p?a-(t-p):a:w>p-m/2?a-(w-(p-m/2)):t<p+m/2?a-(t-(p+m/2)):a;b=n-r>za||!Z.z744Strict?r>q?b-(r-q):n<q?b-(n-q):b:r>q-f/2?b-(r-(q-f/2)):n<q+f/2?b-(n-(q+f/2)):b;"image"==c&&(b=k.convertViewportEdgeCoordsToImageCoords(a,b,l,e),a=b.x,b=b.y);if(a!=g||b!=d)a=Math.round(a),b=Math.round(b),Z.Utils.validateCallback("panConstrained")}return new Z.Utils.Point(a,
b)}function gb(a){a>Z.maxZ?(a=Z.maxZ,Z.Utils.validateCallback("zoomConstrainedMax")):a<Z.minZ&&(a=Z.minZ,Z.Utils.validateCallback("zoomConstrainedMin"));return a}function yc(a){if(0<bb){var b=Z.Utils.arrayIndexOf(va,a.name);-1!=b&&(va=Z.Utils.arraySplice(va,b,1),Y=Z.Utils.arraySplice(Y,b,1));va[va.length]=a.name;Y[Y.length]=a}}function gc(){window.clearTimeout(db);db=null;jb=((new Date).getTime()-tilesTimeStart)/1E3;var a=Jb*jb,a=kb&&cb<a,b=kb&&cb>=Kb;0<kb?Lb<Ac?a||b?(Lb+=1,k.updateView(!0)):db=window.setTimeout(gc,
hc):console.log(Z.Utils.getResource("z727")):(Lb=0,Z.Utils.validateCallback("viewUpdateComplete"),Z.Utils.validateCallback("viewUpdateCompleteGetLabelIDs"))}function Mb(){if(Ja&&(0!=fa||0!=ga||0!=la))if(Z.tracking&&0==la)k.zoomAndPanToView(k.getX()+fa,k.getY()+ga);else{var a=fa,b=ga,l=la,e=k.getZoom();0!=l&&(e=ea(v,F*(1+l)),e=gb(e),e!=Z.imageZ&&Nb(e));if(0!=a||0!=b)a=parseFloat(q.left)+a,b=parseFloat(q.top)+b,e=Pa(a,b,e,Z.imageR,"container"),q.left=Math.round(e.x)+"px",q.top=Math.round(e.y)+"px",
b=e.x-P,e=e.y-Q,y&&N&&(Z.mobileDevice||Math.abs(b)>D/2||Math.abs(e)>B/2)&&p(y,ra,X,"simple",!1,"Updating backfill oversize display");ic++;Ja=window.setTimeout(Mb,Ob)}}function jc(a,b,l,e,c,d,f){vb++;var g=c/d,m=vb*g,h=Z.Utils.easing(Z.imageX,a,m,c),za=Z.Utils.easing(Z.imageY,b,m,c),m=Z.Utils.easing(Z.imageZ,l,m,c),za=k.convertImageCoordsToViewportEdgeCoords(h,za,m),h=za.x,za=za.y;syncOversize=!1;if(parseFloat(q.left)!=h||parseFloat(q.top)!=za)q.left=h+"px",q.top=za+"px",y&&N&&(syncOversize=!0);m!=
Z.imageZ&&(Nb(m,!1),y&&N&&(T.restore(),T.save(),T.scale(aa,aa),syncOversize=!0));syncOversize&&p(y,ra,X,"simple",!1,"Updating backfill oversize display");vb<d+1?Ra=window.setTimeout(function(){jc(a,b,l,e,c,d,f)},g):(Z.interactive=!0,Ra&&(window.clearTimeout(Ra),Ra=null),k.updateView(),"function"===typeof f&&f())}function kc(){ic=la=ga=fa=0;Ja&&(window.clearTimeout(Ja),Ja=null)}function Nb(a,b){var g=!1,e=qa(v,a);if(e!=F){F=e;var g=e/Oa,c=I*g,d=J*g,m=(I-c)/2,f=(J-d)/2;e<Oa&&(e=Pa(parseFloat(q.left),
parseFloat(q.top),a,Z.imageR,"container"),q.left=e.x+"px",q.top=e.y+"px");if(Z.useCanvas)if(V.width=c+"px",V.height=d+"px",V.left=m+"px",V.top=f+"px",aa=qa(ra,k.getZoom()),e=8<aa,N||e){if(null!==T&&"undefined"===typeof b||null===b||b&&y&&("in"!=Z.zooming||c>Z.scaleThreshold||d>Z.scaleThreshold))T.restore(),T.save(),T.scale(aa,aa),T.rotate(Z.imageR*Math.PI/180),p(y,ra,X,"simple",!1,"Updating backfill oversize display");Da=g=qa(M,a);c=g/tierBackfillScalePrior;g=xa*c;c*=ya;d=ha+(xa-g)/2;e=ia+(ya-c)/
2;x.width=g+"px";x.height=c+"px";x.left=d+"px";x.top=e+"px"}else y&&Z.Utils.clearDisplay(y),c=xa*g,d=ya*g,m=ha+Z.imageX*(1-g)*Z.imageZ,f=ia+Z.imageY*(1-g)*Z.imageZ,x.width=c+"px",x.height=d+"px",x.left=m+"px",x.top=f+"px";else p(H,v,Y,"centerOut",!1,"Scaling: non-canvas zoom"),N?(g=lc,xa=I*g,ya=J*g,ha=-(I/g),ia=-(J/g),Pb=Ea*g,Qb=Fa*g,C.width=xa,C.height=ya,x.width=C.width+"px",x.height=C.height+"px"):(g=Ca[M],C.width=oa[M],C.height=g,g=Z.imageY*a,ha=Ea-Z.imageX*a,ia=Fa-g),x.left=ha+"px",x.top=ia+
"px",p(C,M,X,"simple",!1,"Scaling: non-canvas zoom - backfill");g=!0}return g}function ka(a){a=Z.Utils.event(a);var b=a.type;if(a&&b){var g=Z.Utils.isRightMouseButton(a),e=a.altKey;if(!("mouseover"!=b&&"mouseout"!=b&&!Z.interactive||"mousedown"==b&&(!Z.interactive||Z.coordinatesVisible&&e)||g)){("mousedown"==b||"touchstart"==b||Z.tourPlaying&&Z.tourStop)&&k.zoomAndPanAllStop();Z.touchSupport&&"touchmove"!=b&&"gesturechange"!=b&&a.preventDefault();if("mousedown"==b)window.setTimeout(function(){k.zoomAndPanAllStop(!1,
!0)},1);else if("touchstart"==b||"gesturestart"==b)touch=Z.Utils.getFirstTouch(a),k.zoomAndPanAllStop(!1,!0);switch(b){case "mouseover":Z.Viewer.initializeViewerKeyDefaultListeners(!0);break;case "mousedown":Z.Viewer.initializeViewerKeyEventListeners(!0);Z.Utils.addEventListener(document,"mousemove",ka);Z.Utils.addEventListener(document,"mouseup",ka);break;case "mouseup":Z.Utils.removeEventListener(document,"mousemove",ka),Z.Utils.removeEventListener(document,"mouseup",ka)}Bc(a);if("mousedown"==b||
"mousemove"==b)return!1}}}function Bc(a){a=Z.Utils.event(a);var b=a.type;if(a&&b){var g,e;if("touchstart"==b||"touchmove"==b||"touchend"==b||"touchcancel"==b)g=Z.Utils.getFirstTouch(a),"undefined"!==typeof g&&(e=new Z.Utils.Point(g.pageX,g.pageY));else{Z.Utils.target(a);Z.Utils.relatedTarget(a);Z.Utils.isRightMouseButton(a);var c=a.altKey;"resize"!=b&&(e=Z.Utils.getMousePosition(a));Z.smoothPan&&(Ya=e)}"DOMMouseScroll"==b&&(b="mousewheel");var d=k.getZoom(),f;"undefined"!==typeof e&&null!==e&&(f=
k.getClickCoordsInImage(a,d,e));switch(b){case "mousedown":Z.mouseIsDown=!0;ca=new Z.Utils.Point(e.x,e.y);lb=(new Date).getTime();z.mouseXPrior=e.x;z.mouseYPrior=e.y;Z.smoothPan&&!c&&Z.mousePan&&1<Z.smoothPanEasing&&(Rb(void 0),Sb=ca,null===mb&&(mb=new Z.Utils.Point(parseFloat(q.left),parseFloat(q.top))),null===Sa&&(Sa=window.setInterval(Cc,50)));break;case "mousemove":Ta=new Z.Utils.Point(e.x,e.y);G&&(clearTimeout(G),G=null,z604(a,f,isDblClick));!c&&Z.mousePan&&(Sa?Ya=e:Z.animation&&k.getZoom()==
Z.minZ?(e.x>z.mouseXPrior?Z.Viewer.viewportNext():e.x<z.mouseXPrior&&Z.Viewer.viewportPrior(),z.mouseXPrior=e.x,z.mouseYPrior=e.y):(a=e.x-z.mouseXPrior,c=e.y-z.mouseYPrior,isNaN(a)||isNaN(c)||(a=parseFloat(q.left)+a,c=parseFloat(q.top)+c,c=Pa(a,c,Z.imageZ,Z.imageR,"container"),q.left=c.x+"px",q.top=c.y+"px",z.mouseXPrior=e.x,z.mouseYPrior=e.y,a=c.x-P,c=c.y-Q,y&&N&&(Z.mobileDevice||Math.abs(a)>D/2||Math.abs(c)>B/2)&&p(y,ra,X,"simple",!1,"Updating backfill oversize display"))));break;case "mouseup":Z.mouseIsDown=
!1;document.mousemove=null;document.mouseup=null;b=(new Date).getTime();Z.mouseOutDownPoint?(e=Z.mouseOutDownPoint,f=k.getClickCoordsInImage(a,d,Z.mouseOutDownPoint)):e=new Z.Utils.Point(e.x,e.y);e=Z.Utils.calculatePointsDistance(ca.x,ca.y,e.x,e.y);d=b-lb;if(e<Dc&&d<Ec){if(Z.clickZoom||Z.clickPan){e=G&&Z.doubleClickZoom?!0:!1;var h=k.getClickZoomCoords3D(a,ca,v,F,e)}Z.clickZoom?Z.doubleClickZoom?G?(clearTimeout(G),G=null,k.zoomAndPanToView(h.x,h.y,h.z)):G=setTimeout(function(a){G=null;k.zoomAndPanToView(h.x,
h.y,h.z)},Z.doubleClickDelay):window.setTimeout(function(){k.zoomAndPanToView(h.x,h.y,h.z)},1):Z.clickPan&&k.zoomAndPanToView(h.x,h.y,Z.imageZ)}Z.mouseOutDownPoint&&Z.Toolbar.show(!1);break;case "touchstart":g&&!Ka&&(Z.mouseIsDown=!0,nb=!1,ca=new Z.Utils.Point(e.x,e.y),lb=(new Date).getTime(),z.mouseXPrior=e.x,z.mouseYPrior=e.y);break;case "touchmove":!g||Ka||nb||(Ta=new Z.Utils.Point(e.x,e.y),G&&(clearTimeout(G),G=null,z604(a,f,isDblClick)),!c&&Z.mousePan&&(Sa?Ya=e:(a=e.x-z.mouseXPrior,c=e.y-z.mouseYPrior,
isNaN(a)||isNaN(c)||(a=parseFloat(q.left)+a,c=parseFloat(q.top)+c,c=Pa(a,c,Z.imageZ,Z.imageR,"container"),q.left=c.x+"px",q.top=c.y+"px",z.mouseXPrior=e.x,z.mouseYPrior=e.y,a=c.x-P,c=c.y-Q,y&&N&&(Z.mobileDevice||Math.abs(a)>D/2||Math.abs(c)>B/2)&&p(y,ra,X,"simple",!1,"Updating backfill oversize display")))));break;case "touchend":if(!Ka&&!nb){Z.mouseIsDown=!1;document.mousemove=null;document.mouseup=null;b=(new Date).getTime();Z.mouseOutDownPoint?(e=Z.mouseOutDownPoint,f=k.getClickCoordsInImage(a,
d,Z.mouseOutDownPoint)):e="undefined"!==typeof e&&null!==e?new Z.Utils.Point(e.x,e.y):"undefined"!==typeof Ta&&null!==Ta?Ta:ca;e=Z.Utils.calculatePointsDistance(ca.x,ca.y,e.x,e.y);d=b-lb;if(e<mc&&d<nc||!c&&("rectangle"==Z.labelMode||"freehand"==Z.labelMode))Z.clickZoom?(e=G&&Z.doubleClickZoom?!0:!1,h=k.getClickZoomCoords3D(a,ca,v,F,e),Z.doubleClickZoom?G?(clearTimeout(G),G=null,k.zoomAndPanToView(h.x,h.y,h.z)):G=setTimeout(function(a){G=null;k.zoomAndPanToView(h.x,h.y,h.z)},Z.doubleClickDelay):window.setTimeout(function(){k.zoomAndPanToView(h.x,
h.y,h.z)},1)):Z.clickPan&&k.zoomAndPanToView(h.x,h.y,Z.imageZ);Z.mouseOutDownPoint&&Z.Toolbar.show(!1)}break;case "touchcancel":if(!Ka&&!nb){Z.mouseIsDown=!1;document.mousemove=null;document.mouseup=null;b=(new Date).getTime();Z.mouseOutDownPoint?(e=Z.mouseOutDownPoint,f=k.getClickCoordsInImage(a,d,Z.mouseOutDownPoint)):e="undefined"!==typeof e&&null!==e?new Z.Utils.Point(e.x,e.y):"undefined"!==typeof Ta&&null!==Ta?Ta:ca;e=Z.Utils.calculatePointsDistance(ca.x,ca.y,e.x,e.y);d=b-lb;if(e<mc&&d<nc||!c&&
("rectangle"==Z.labelMode||"freehand"==Z.labelMode))Z.clickZoom?(e=G&&Z.doubleClickZoom?!0:!1,h=k.getClickZoomCoords3D(a,ca,v,F,e),Z.doubleClickZoom?G?(clearTimeout(G),G=null,k.zoomAndPanToView(h.x,h.y,h.z)):G=setTimeout(function(a){G=null;k.zoomAndPanToView(h.x,h.y,h.z)},Z.doubleClickDelay):window.setTimeout(function(){k.zoomAndPanToView(h.x,h.y,h.z)},1)):Z.clickPan&&k.zoomAndPanToView(h.x,h.y,Z.imageZ);Z.mouseOutDownPoint&&Z.Toolbar.show(!1)}break;case "gesturestart":Fc(a);Ka||(Ka=window.setInterval(Gc,
Hc));break;case "gesturechange":Tb=Math.round(100*a.scale)/100;break;case "gestureend":Ka&&(window.clearInterval(Ka),nb=!0,Ka=null),Z.mousePan&&k.updateView()}}}function Rb(a){null!==Sa&&a&&(window.clearInterval(Sa),Sa=null);mb=Ub=Vb=ma=null;La=Ma=Ua=Va=0}function Cc(){var a=parseFloat(q.left),b=parseFloat(q.top);if(Z.mouseIsDown||ma){var c=(ma?Ub:Ya.x)-Sb.x,e=(ma?Vb:Ya.y)-Sb.y,d=a-mb.x,f=b-mb.y;if(!(isNaN(c)||isNaN(e)||isNaN(d)||isNaN(f)||0==c&&0==e&&0==d&&0==f)){var h=ma?Z.smoothPanGlide:1,t=ma?
1:100;La=Math.round((c-d)/(Z.smoothPanEasing*h)*t/t);Ma=Math.round((e-f)/(Z.smoothPanEasing*h)*t/t);Z.mouseIsDown?(Ua=La,Va=Ma):(Math.abs(La)>Math.abs(Ua)&&(La=Ua),Math.abs(Ma)>Math.abs(Va)&&(Ma=Va));a+=La;b+=Ma;c=Pa(a,b,Z.imageZ,Z.imageR,"container");q.left=c.x+"px";q.top=c.y+"px";La-=a-c.x;Ma-=b-c.y;y&&N&&p(y,ra,X,"simple",!1,"Updating backfill oversize display");ma&&0==Math.round(La*t)/t&&0==Math.round(Ma*t)/t&&(ma=!1)}}else if(Z.mouseIsDown||null!==ma||0==La||0==Ma)Rb(!0),k.updateView();else if(c=
Pa(a+Ua,b+Va,Z.imageZ,Z.imageR,"container"),Ua=c.x-a,Va=c.y-b,0!=Ua||0!=Va)Ub=Ya.x+Ua,Vb=Ya.y+Va,ma=!0}function Fc(a){a=Z.Utils.event(a);a.preventDefault();Tb=Math.round(100*a.scale)/100}function Gc(a){if(Z.mousePan){a=ea(v,Oa*Tb);var b=gb(a);a!=Z.imageZ&&k.z633(b)}}var yb=null,zb=null,oc=0;"undefined"!==typeof a&&null!==a&&(oc=a);var pc=Z.imagePath,k=this,Za=[],xb=0,Aa=parseInt(Z.Utils.getResource("z221"),10),Ba=parseInt(Z.Utils.getResource("z219"),10),Ic=parseFloat(Z.Utils.getResource("z218")),
bb=parseInt(Z.Utils.getResource("z220"),10),Dc=parseInt(Z.Utils.getResource("z716"),10),Ec=parseInt(Z.Utils.getResource("z715"),10),mc=parseInt(Z.Utils.getResource("z723"),10),nc=parseInt(Z.Utils.getResource("z722"),10),Wb,y,ab,T,eb,z,q,Xb,C,x,Na,ob,H,V,U,Yb,da,fb,$a;(function(a){if("undefined"===typeof a||null===a)a=0;a=a.toString();Z.useCanvas&&!y&&(Wb=Z.Utils.createContainerElement("canvas","oversizeDisplay"+a,"inline-block","absolute","visible","1px","1px","0px","0px","none","0px","transparent none",
"0px","0px","normal"),Z.ViewerDisplay.appendChild(Wb),y=Wb,ab=y.style);z||(eb=Z.Utils.createContainerElement("div","viewportContainer"+a,"inline-block","absolute","visible","1px","1px","0px","0px","none","0px","transparent none","0px","0px","normal"),Z.ViewerDisplay.appendChild(eb),z=eb,q=z.style);C||(Xb=Z.Utils.createContainerElement(Z.useCanvas?"canvas":"div","viewportBackfillDisplay"+a,"inline-block","absolute","visible","1px","1px","0px","0px","none","0px","transparent none","0px","0px","normal"),
eb.appendChild(Xb),C=Xb,x=C.style);H||(ob=Z.Utils.createContainerElement(Z.useCanvas?"canvas":"div","viewportDisplay"+a,"inline-block","absolute","visible","1px","1px","0px","0px","none","0px","transparent none","0px","0px","normal"),eb.appendChild(ob),H=ob,V=H.style);Z.useCanvas&&!da&&(Yb=Z.Utils.createContainerElement("canvas","transitionCanvas","none","absolute","visible","1px","1px","0px","0px","none","0px","transparent none","0px","0px","normal"),eb.appendChild(Yb),da=Yb,fb=da.style)})(oc);var na=
1,v=0,M=0,N=!1,ra=0,Db=!1,F,Oa,Da,aa,oa=[],Ca=[],ja=[],pa=[],Wa=[],Ga=[],X=[],W=[],sa=[],Qa=[],sb=0,cc=0,dc=0,Gb=0,ec=0,fc=0,Eb=0,Fb=0,Kb=0,cb=0,Ib=0,kb=0,jb=0,Jb=0,Ha=[],K=[],Y=[],va=[],Ia=[],ta=[],db=null,Lb=0,Ac=parseInt(Z.Utils.getResource("z725"),10),hc=parseInt(Z.Utils.getResource("z724"),10),xc=new Z.NetConnector,ac=parseInt(Z.Utils.getResource("z81"),10),Jc=parseInt(Z.Utils.getResource("z78"),10),qc=parseInt(Z.Utils.getResource("z80"),10),hb=parseInt(Z.Utils.getResource("z77"),10),ra=hb,rc=
parseInt(Z.Utils.getResource("z79"),10),rb=parseInt(Z.Utils.getResource("z76"),10),qb=parseInt(Z.Utils.getResource("z75"),10),Cb=null,Bb=null,Ab=null,bc=parseFloat(Z.Utils.getResource("z173"),10),lc=parseFloat(Z.Utils.getResource("z74"),10),wc=parseFloat(Z.Utils.getResource("DEFAULT_z310SIZEMAXBROWSER"),10),D,B,Zb,$b,I,J,Ea,Fa,P,Q,xa,ya,Pb,Qb,ha,ia;D=Z.viewerW;B=Z.viewerH;Zb=$b=0;B-=0;var G=null,ca,Ta,lb,Ka=null,Tb=null,nb=!1,Hc=parseInt(Z.Utils.getResource("z122"),10),wb=Math.round(parseFloat(Z.Utils.getResource("z176"))*
Z.panSpeed),fa=0,ga=0,Sa=null,Sb=null,mb=null,Ya=null,La=0,Ma=0,Ua=0,Va=0,ma=null,Ub=null,Vb=null,pb=parseFloat(Z.Utils.getResource("z242"))*Z.zoomSpeed;Z.mobileDevice&&(pb/=2);var la=0,Ja=null,ic=0,Ob=parseInt(Z.Utils.getResource("z238"),10),Hb=parseFloat(Z.Utils.getResource("z112"))*Z.fadeInSpeed,ub=null,Kc=parseFloat(Z.Utils.getResource("z239")),sc=parseFloat(Z.Utils.getResource("z240"));Z.mobileDevice&&(sc/=2);var Ra=null,vb=0;if(null!==Z.imagePath&&"null"!=Z.imagePath)if(1==Z.localUse&&(Z.browser==
Z.browsers.CHROME||Z.browser==Z.browsers.OPERA||Z.browser==Z.browsers.IE&&11==Z.browserVersion||Z.browser==Z.browsers.SAFARI&&7<=Z.browserVersion))Z.Utils.showMessage(Z.Utils.getResource("z288"),!1,Z.messageDurationStandard,"center");else if(-1!=Z.imagePath.indexOf("zComparisonPath")&&-1!=Z.imagePath.indexOf("zSlidePath")&&-1!=Z.imagePath.indexOf("zOverlayPath")&&-1!=Z.imagePath.indexOf("zAnimationPath")&&-1!=Z.imagePath.indexOf("zSlidestackPath"))Z.Utils.showMessage(Z.Utils.getResource("DEFAULT_MULTIIMAGESUPPORTDISABLEDALERT"),
!1,Z.messageDurationStandard,"center");else{var Lc=new Z.NetConnector;S(pc,Lc,null)}this.clearAll=function(a,b,c,e){a&&(sb=0,"undefined"!==typeof X&&Z.Utils.arrayClear(X),"undefined"!==typeof W&&Z.Utils.arrayClear(W),"undefined"!==typeof Ga&&Z.Utils.arrayClear(Ga),"undefined"!==typeof Ha&&Z.Utils.arrayClear(Ha),"undefined"!==typeof K&&Z.Utils.arrayClear(K),"undefined"!==typeof Y&&Z.Utils.arrayClear(Y),"undefined"!==typeof va&&Z.Utils.arrayClear(va),"undefined"!==typeof Ia&&Z.Utils.arrayClear(Ia),
"undefined"!==typeof ta&&Z.Utils.arrayClear(ta),"undefined"!==typeof sa&&Z.Utils.arrayClear(sa),"undefined"!==typeof Qa&&Z.Utils.arrayClear(Qa));b&&n();e&&(y&&Z.Utils.clearDisplay(y),C&&Z.Utils.clearDisplay(C),H&&Z.Utils.clearDisplay(H),da&&Z.Utils.clearDisplay(da))};this.z759=function(a,b,c,e){E(a,b,c,e)};this.z752=function(a,b,c){S(a,b,c)};this.z602=function(a,b){O(a,b)};this.validateXYZDefaults=function(){var a=parseFloat(Z.Utils.getResource("z143")),b=parseFloat(Z.Utils.getResource("z144")),c=
parseFloat(Z.Utils.getResource("z145")),e=parseFloat(Z.Utils.getResource("DEFAULT_INITIALR")),d=parseFloat(Z.Utils.getResource("z163")),f=parseFloat(Z.Utils.getResource("z153")),a=isNaN(a)?null:a,b=isNaN(b)?null:b,c=isNaN(c)?null:c,e=isNaN(e)?null:e,d=isNaN(d)?null:d,f=isNaN(f)?null:f;Z.initialX=a;Z.initialY=b;Z.initialZ=c;Z.initialR=e;Z.minZ=d;Z.maxZ=f;null===Z.initialX&&(Z.initialX=Z.imageW/2);null===Z.initialY&&(Z.initialY=Z.imageH/2);Z.fitZ=k.z468(null,null,0);Z.fillZ=k.calculateZoomToFill(null,
null,0);f=k.z468(null,null,0);a=k.calculateZoomToFill(null,null,0);1<Z.fitZ&&null!==Z.maxZ&&Z.fitZ>Z.maxZ&&(Z.fitZ=Z.maxZ);1<Z.fillZ&&null!==Z.maxZ&&Z.fillZ>Z.maxZ&&(Z.fillZ=Z.maxZ);null===Z.minZ||-1==Z.minZ?Z.minZ=Z.fitZ:0==Z.minZ&&(Z.minZ=Z.fillZ);if(null===Z.maxZ||-1==Z.maxZ)Z.maxZ=1;null===Z.initialZ||-1==Z.initialZ?Z.initialZ=f:0==Z.initialZ&&(Z.initialZ=a);Z.initialZ<Z.minZ&&(Z.initialZ=Z.minZ);Z.initialZ>Z.maxZ&&(Z.initialZ=Z.maxZ)};this.getTierScale=function(){return F};this.getX=function(a){var b=
parseFloat(q.left)-P;a=k.getZoom(a);return yb-b/a};this.getY=function(a){var b=parseFloat(q.top)-Q;a=k.getZoom(a);return zb-b/a};this.getZoom=function(a){var b=F;a&&(b=F*parseFloat(V.width)/I);return ea(v,b)};this.z619=function(b){b||(r(qb,W),Cb=!0);(!Z.imageSet||a==Z.imageSetStart||b)&&na>rc&&(r(rb,W),Bb=!0,na>qc&&(r(hb,W),Ab=!0),k.setStatus("backfillPrecachedViewport",!0));W.sort();W=Z.Utils.arrayUnique(W);Ga=W.slice(0);k.traceDebugValues("tilesBackfillToPrecache",null,Ga.length);t(W,Xa,"simple",
"image-backfill")};this.updateView=function(b,c){if("undefined"===typeof a||null===a)a=0;var d=Z.mouseIsDown||Z.buttonIsDown||Z.keyIsDown||Z.mouseWheelIsDown,e=F!=Oa||k.getZoom()!=Z.imageZ||Z.imageZ!=Z.priorZ,g=parseFloat(q.left)!=P||parseFloat(q.top)!=Q||k.getX()!=Z.imageX||k.getY()!=Z.imageY;if(e||g||"undefined"!==typeof b&&b&&!d){if(!Z.Viewer.getStatus("readyViewer")||a==Z.viewportCurrentID){var f=!1;if(b||parseFloat(V.width)!=H.width){if(Z.useCanvas){V.width=H.width+"px";V.height=H.height+"px";
V.left="0px";V.top="0px";U.restore();U.save();try{U.scale(F,F)}catch(uc){console.log("In function z630 scaling canvas:  "+uc)}C&&(N?(x.width=C.width+"px",x.height=C.height+"px",x.left=ha+"px",x.top=ia+"px",Na.restore(),Na.save(),Na.scale(Da,Da)):(x.width=xa+"px",x.height=ya+"px",x.left=ha+"px",x.top=ia+"px"))}f=!0}if(b||parseFloat(q.left)!=P||parseFloat(q.top)!=Q){f=parseFloat(q.left)-P;d=parseFloat(q.top)-Q;0!=Z.imageR&&(d=Z.Utils.rotatePoint(f,d,Z.imageR),f=d.x,d=d.y);q.left=P+"px";q.top=Q+"px";
N||(ha=parseFloat(x.left)+f,ia=parseFloat(x.top)+d,x.left=ha+"px",x.top=ia+"px");var m=k.getZoom();Z.imageX=yb=Z.imageX-f/m;Z.imageY=zb=Z.imageY-d/m;f=!0}f&&(p(H,v,Y,"centerOut",!1,"1a. Updating view: resetting display positions"),N&&p(C,M,X,"simple",!1,"1b. Updating view: resetting backfill positions"));f=!1;if("undefined"!==typeof b&&b||F!=Oa||k.getZoom()!=Z.imageZ||!k.getStatus("initializedViewport")||c){F!=Oa&&(Z.imageZ=k.getZoom());Z.imageZ<Z.minZ&&(Z.imageZ=Z.minZ);Z.imageZ>Z.maxZ&&(Z.imageZ=
Z.maxZ);m=Ic;for(d=na;0<d&&m/2>=Z.imageZ;)d--,m/=2;d=0>d-1?0:d-1;m=qa(d,Z.imageZ);if(d!=v||m!=F)Z.useCanvas&&(U.restore(),U.save(),U.scale(m,m)),v!=d&&(Db=!0),v=d,F=m;Oa=F;N=!1;v>ac?(M=v-Jc,N=!0):M=v>qc?hb:v>rc?rb:qb;tierBackfillScalePrior=Da=qa(M,Z.imageZ);var d=oa[M],m=Ca[M],h=Z.imageX*Z.imageZ,n=Z.imageY*Z.imageZ;N?(d=lc,xa=I*d,ya=J*d,ha=-(I/d),ia=-(J/d),Pb=Ea*d,Qb=Fa*d,C.width=xa,C.height=ya,x.width=C.width+"px",x.height=C.height+"px",x.left=ha+"px",x.top=ia+"px",Z.useCanvas&&(y&&(aa=qa(ra,Z.imageZ),
T.restore(),T.save(),T.scale(aa,aa),0!=Z.imageR&&T.rotate(Z.imageR*Math.PI/180)),Na.restore(),Na.translate(Pb,Qb),Na.save(),Na.scale(Da,Da))):(xa=d*Da,ya=m*Da,ha=Ea-h,ia=Fa-n,C.width=d,C.height=m,Z.useCanvas&&(x.width=xa+"px",x.height=ya+"px"),x.left=ha+"px",x.top=ia+"px");p(C,M,X,"simple",!1,"2. Updating view: changing tier - backfill");!b&&0<bb&&(f=!0)}else k.traceDebugValues("updateView-noChange");N?A(!0):y&&Z.Utils.clearDisplay(y)}a==Z.viewportCurrentID&&(A(),p(H,v,null,"centerOut",f,"3. Updating view: prior to loading of any new tiles"),
0<K.length&&t(K,ib,"centerOut","image-display"));g&&Z.Utils.validateCallback("viewPanned");e&&Z.Utils.validateCallback("viewZoomed");(g||e)&&Z.Utils.validateCallback("viewChanged")}};syncTransitionCanvas=function(){da&&fb&&$a&&(da.width=H.width,da.height=H.height,fb.width=V.width,fb.height=V.height,fb.left=V.left,fb.top=V.top,$a.restore(),$a.save(),$a.translate(Ea,Fa),$a.scale(F,F))};this.formatTilePath=function(a,b,c,d){d=c*ja[a]+b;for(var e=0;e<a;e++)d+=Wa[e];a=pc+"/TileGroup"+Math.floor(d/256)+
"/"+a+"-"+b+"-"+c+"."+Z.tileType;if(Z.browser==Z.browsers.IE&&9>Z.browserVersion||0==bb)a=Z.Utils.cacheProofPath(a);return a};this.getClickCoordsAtZoom=function(a,b){var c=this.getClickCoordsInImage(a,b);return new Z.Utils.Point(c.x*b,c.y*b)};this.getClickCoordsInImage=function(a,b,c){a=Z.Utils.event(a);var d=null;if(a){var g=a.type;if("undefined"===typeof b||null==b)b=k.getZoom();if("undefined"===typeof c||null===c)"touchstart"==g||"touchend"==g||"touchcancel"==g?(touch=Z.Utils.getFirstTouch(a),
"undefined"!==typeof touch&&(target=touch.target,c=new Z.Utils.Point(touch.pageX,touch.pageY))):(target=Z.Utils.target(a),relatedTarget=Z.Utils.relatedTarget(a),c=Z.Utils.getMousePosition(a));"undefined"!==typeof c&&null!==c&&(a=k.z479(c.x,c.y),d=k.z485(a.x,a.y,b))}return d};this.getClickZoomCoords3D=function(a,b,c,d,f){var e=parseFloat(Z.Utils.getResource("z93TIERSKIPTHRESHOLD"));b=k.z479(b.x,b.y);b=k.z485(b.x,b.y,Z.imageZ);var g=ea(c,d);a=a.altKey;f?a?g=Z.fitZ:(f=qa(c,Z.fitZ),d-f<e?g=Z.fitZ:d>1+
e?g=ea(c,1):0<c&&(g=ea(c-1,1))):a?g=Z.maxZ:d<1-e?g=ea(c,1):c<na-1?g=ea(c+1,1):1<Z.maxZ&&(g=Z.maxZ);return new Z.Utils.Point3D(b.x,b.y,g)};this.calculateCurrentCenterCoordinates=function(a,b,c){if("undefined"===typeof a||null===a)a=new Z.Utils.Point(parseFloat(q.left),parseFloat(q.top));if("undefined"===typeof b||null===b)b=k.getZoom();return new Z.Utils.Point(Math.round(Z.imageX-(a.x-P)/b),Math.round(Z.imageY-(a.y-Q)/b))};this.z542=function(a,b,c,d){if("undefined"===typeof a||null===a)a=v;if("undefined"===
typeof b||null===b)b=!1;return new wa(k.z541(b,c?a:null,d),a)};this.z541=function(a,b,c){var d=parseFloat(q.left)-P,g=parseFloat(q.top)-Q;if(Z.useCanvas)var f=parseFloat(q.width)/z.width,d=d/f,g=g/f;f=k.getZoom();0!=d&&(d/=f);0!=g&&(g/=f);var d=Z.imageX-d,g=Z.imageY-g,l,m,h;a?(a=-(D/2),m=D/2,l=-(B/2),h=B/2):(a=-(I/2),m=I/2,l=-(J/2),h=J/2);return new zc(d,g,a,m,l,h,f,b,c)};this.z480=function(a,b){var c=k.z479(a,b);return new Z.Utils.Point(c.x-P,c.y-Q)};this.z479=function(a,b){var c=Z.Utils.getElementPosition(ob);
return new Z.Utils.Point(a-c.x+P,b-c.y+Q)};this.convertViewportCoordsToPageCoords=function(a,b){var c=Z.Utils.getElementPosition(ob);return new Z.Utils.Point(a+c.x-P,b+c.y-Q)};this.z485=function(a,b,c,d){if("undefined"===typeof c||null===c)c=Z.imageZ;if("undefined"===typeof d||null===d)d=Z.imageR;0>d&&(d+=360);var e=parseFloat(q.left)+Ea,g=parseFloat(q.top)+Fa;a-=e;b-=g;0!=Z.imageR&&(viewportClickPt=Z.Utils.rotatePoint(a,b,d),a=viewportClickPt.x,b=viewportClickPt.y);return new Z.Utils.Point(a/c+Z.imageX,
b/c+Z.imageY)};this.convertImageCoordsToViewportEdgeCoords=function(a,b,c,d){if("undefined"===typeof c||null===c)c=Z.imageZ;if("undefined"===typeof d||null===d)d=Z.imageR;0>d&&(d+=360);a=(Z.imageX-a)*c;b=(Z.imageY-b)*c;0!=Z.imageR&&(viewportClickPt=Z.Utils.rotatePoint(a,b,-d),a=viewportClickPt.x,b=viewportClickPt.y);return new Z.Utils.Point(P+a,Q+b)};this.convertViewportEdgeCoordsToImageCoords=function(a,b,c,d){if("undefined"===typeof c||null===c)c=Z.imageZ;if("undefined"===typeof d||null===d)d=Z.imageR;
0>d&&(d+=360);a-=P;b-=Q;0!=Z.imageR&&(viewportClickPt=Z.Utils.rotatePoint(a,b,-d),a=viewportClickPt.x,b=viewportClickPt.y);return new Z.Utils.Point(Z.imageX-a/c,Z.imageY-b/c)};this.z468=function(a,b,c){if("undefined"===typeof a||null===a)a=Z.imageW;if("undefined"===typeof b||null===b)b=Z.imageH;var d=a/b>D/B?D/a:B/b;if(90==c||270==c)d=a/b>D/B?D/b:B/a;return d};this.calculateZoomToFill=function(a,b,c){if("undefined"===typeof a||null===a)a=Z.imageW;if("undefined"===typeof b||null===b)b=Z.imageH;var d=
a/b>D/B?B/b:D/a;if(90==c||270==c)d=a/b>D/B?B/a:D/b;return d};this.z482=function(a,b){return ea(a,b)};this.getStatus=function(a){a=Z.Utils.arrayIndexOfObjectValue(Za,"state",a);return-1==a?!1:Za[a].status};this.setStatus=function(a,b){var c=!1,d=Z.Utils.arrayIndexOfObjectValue(Za,"state",a);-1==d?(c=b,Za[Za.length]={state:a,status:b}):(!Za[d].status&&b&&(c=!0),Za[d].status=b);c&&(Z.Utils.validateCallback(a),Z.Viewer.validateViewerStatus(a))};this.traceDebugValues=function(a,b,c,d){c="undefined"!==
typeof c&&null!==c?c:null;b=null!==b?b:"";switch(a){case "tilesToDisplay":Eb=c;Ib=cb=Kb=Fb=0;kb=c;jb=0;tilesTimeStart=(new Date).getTime();Jb=0;window.clearTimeout(db);db=null;db=window.setTimeout(gc,hc);break;case "tilesInCache":Fb=c;break;case "z581-image-display":Kb+=1;break;case "z755":cb+=1;jb=((new Date).getTime()-c)/1E3;Jb=cb/jb;break;case "z507":a=Z.Utils.arrayIndexOf(Ha,b);-1!=a&&(Ha.splice(a,1),Ib+=1,--kb);break;case "tilesBackfillToPrecache":cc=c;break;case "onTileBackfillPrecache":dc+=
1;break;case "tilesBackfillToDisplay":Gb=c;break;case "z599":ec+=1;break;case "displayBackfillTile":a=Z.Utils.arrayIndexOf(Ga,b),-1!=a&&(Ga.splice(a,1),fc+=1)}};this.zoom=function(a){if("stop"!=a||"stop"!=Z.zooming){switch(a){case "out":0<=la&&(la-=pb);break;case "in":0>=la&&(la+=pb);break;case "stop":la=0}Z.zooming=0==la?"stop":0<la?"in":"out";0!=la?Ja||(Ja=window.setTimeout(Mb,Ob)):(kc(),k.updateView())}};this.pan=function(a){if("horizontalStop"!=a||"stop"!=Z.panningX)if("verticalStop"!=a||"stop"!=
Z.panningY){if(!Z.tracking)switch(a){case "left":0>=fa&&(fa+=wb);break;case "up":0>=ga&&(ga+=wb);break;case "down":0<=ga&&(ga-=wb);break;case "right":0<=fa&&(fa-=wb);break;case "horizontalStop":fa=0;break;case "verticalStop":ga=0;break;case "stop":ga=fa=0}Z.panningX=0==fa?"stop":0<fa?"left":"right";Z.panningY=0==ga?"stop":0<ga?"up":"down";ea(v,1);ea(v,1);0!=fa||0!=ga?Ja||(Ja=window.setTimeout(Mb,Ob)):(kc(),k.updateView())}};this.zoomAndPanToView=function(a,b,c,d,f,h,p){k.zoomAndPanAllStop();if("undefined"===
typeof a||null===a)a=Z.imageX;if("undefined"===typeof b||null===b)b=Z.imageY;if("undefined"===typeof c||null===c)c=Z.imageZ;if("undefined"===typeof d||null===d)d=Z.imageR;if("undefined"===typeof f||null===f)f=Kc;if("undefined"===typeof h||null===h)h=sc;if("center"==a||isNaN(parseFloat(a)))a=Z.imageCtrX;if("center"==b||isNaN(parseFloat(b)))b=Z.imageCtrY;if(-1==c||isNaN(parseFloat(c)))c=Z.fitZ;if("undefined"===typeof a||null===a)a=Z.initialX;if("undefined"===typeof b||null===b)b=Z.initialY;if("undefined"===
typeof d||null===d)d=Z.imageR;"undefined"===typeof c||null===c?c=Z.initialZ:100<c?c/=100:c>Z.maxZ?c=Z.maxZ:c<Z.maxZ&&c>Z.maxZ-.01&&(c=Z.maxZ);b=Pa(a,b,c,d,"image");a=b.x;b=b.y;c=gb(c);if(Math.round(a)!=Math.round(Z.imageX)||Math.round(b)!=Math.round(Z.imageY)||Math.round(1E5*c)!=Math.round(1E5*Z.imageZ)||Math.round(d)!=Math.round(Z.imageR))Z.interactive=!1,vb=0,jc(a,b,c,d,f,h,p)};this.zoomAndPanAllStop=function(a,b){Z.interactive&&(Ra&&Ra&&(window.clearTimeout(Ra),Ra=null),Z.smoothPan&&null!==Sa&&
(Z.mouseIsDown||Rb(!0),a=!0),a||k.updateView())};this.z633=function(a,b){Nb(a,b)};this.reset=function(){k.zoomAndPanToView(Z.initialX,Z.initialY,Z.initialZ,Z.initialR)};this.getSmoothPanGliding=function(){return ma};this.setSmoothPanGliding=function(a){ma=a};this.mouseWheelHandler=function(a,b){Z.mouseWheelIsDown=!0;Z.mouseWheelCompleteTimer&&window.clearTimeout(Z.mouseWheelCompleteTimer);Z.mouseWheelCompleteTimer=window.setTimeout(Z.Viewer.z586,Z.mouseWheelCompleteDuration);var c=k.z482(v,F*(1+(0<
a?pb:-pb)));constrainedZ=gb(c);constrainedZ!=Z.imageZ&&(Z.zooming=0<a?"in":0>a?"out":"stop",k.z633(constrainedZ))}};
Z.ZoomifyToolbar=function(a){function b(b){if(b=Z.Utils.event(b)){var c=b.type,r=Z.Utils.target(b);if(r){d.background=E;f.background=E;h.background=E;var A=r.id;b=b.altKey;switch(c){case "mouseover":r.style.background=u;break;case "mousedown":r.style.background=n;"buttonZoomInInternal"==A?b||a.zoom("in"):"buttonZoomOutInternal"==A&&(b||a.zoom("out"));break;case "mouseup":r.style.background=u,a.zoom("stop"),"buttonResetInternal"==A&&a.reset()}}}}var c=!1,d,f,h,u=Z.Utils.getResource("z731"),n=Z.Utils.getResource("z730"),
E=Z.Utils.getResource("z733");(function(){parseFloat(Z.Utils.getResource("z728"));var a=Z.Utils.getResource("z729"),n=Z.Utils.getResource("z733"),r=Math.round(25),u=Math.round(25/1.5),p=(100-3*r)/4,ba=(25-u)/2;Z.ToolbarDisplay=Z.Utils.createContainerElement("div","ToolbarDisplay","inline-block","absolute","visible","100px","25px",Z.viewerW/2-50+"px",Z.viewerH-25-10+"px","none","0px","transparent none","0px","0px","normal");tbS=Z.ToolbarDisplay.style;var t=Z.Utils.createContainerElement("div","buttonZoomOutInternal",
"inline-block","absolute","visible",r+"px",u+"px",p+1+"px",ba+1+"px","none","0px",n,"0px","0px","normal");Z.Utils.setOpacity(t,.6,a);t.setAttribute("title",Z.Utils.getResource("z400"));var w=document.createTextNode(Z.Utils.getResource("z735"));t.appendChild(w);Z.ToolbarDisplay.appendChild(t);h=t.style;h.borderRadius="3px";Z.Utils.setTextNodeStyle(w,"black","verdana","15px","none","normal","normal","normal","bold","1em","center","none");Z.Utils.disableTextInteraction(w);w=Z.Utils.createContainerElement("div",
"buttonResetInternal","inline-block","absolute","visible",r+"px",u+"px",2*p+r+1+"px",ba+1+"px","none","0px",n,"0px","0px","normal");Z.Utils.setOpacity(w,.6,a);w.setAttribute("title",Z.Utils.getResource("z378"));var L=document.createTextNode(Z.Utils.getResource("z732"));w.appendChild(L);Z.ToolbarDisplay.appendChild(w);f=w.style;f.borderRadius="3px";Z.Utils.setTextNodeStyle(L,"blue","verdana","15px","none","normal","normal","normal","bold","1em","center","none");Z.Utils.disableTextInteraction(L);n=
Z.Utils.createContainerElement("div","buttonZoomInInternal","inline-block","absolute","visible",r+"px",u+"px",3*p+2*r+1+"px",ba+1+"px","none","0px",n,"0px","0px","normal");Z.Utils.setOpacity(n,.6,a);n.setAttribute("title",Z.Utils.getResource("z399"));a=document.createTextNode(Z.Utils.getResource("z734"));n.appendChild(a);Z.ToolbarDisplay.appendChild(n);d=n.style;d.borderRadius="3px";Z.Utils.setTextNodeStyle(a,"black","verdana","15px","none","normal","normal","normal","bold","1em","center","none");
Z.Utils.disableTextInteraction(a);Z.Utils.addEventListener(t,"mouseover",b);Z.Utils.addEventListener(t,"mousedown",b);Z.Utils.addEventListener(t,"mouseup",b);Z.Utils.addEventListener(t,"mouseout",b);Z.Utils.addEventListener(w,"mouseover",b);Z.Utils.addEventListener(w,"mousedown",b);Z.Utils.addEventListener(w,"mouseup",b);Z.Utils.addEventListener(w,"mouseout",b);Z.Utils.addEventListener(n,"mouseover",b);Z.Utils.addEventListener(n,"mousedown",b);Z.Utils.addEventListener(n,"mouseup",b);Z.Utils.addEventListener(n,
"mouseout",b);tbS.zIndex=(Z.baseZIndex+2).toString();Z.ViewerDisplay.appendChild(Z.ToolbarDisplay);Z.Utils.addEventListener(Z.ToolbarDisplay,"mouseover",Z.Utils.stopPropagation);c||(c=!0,Z.Utils.validateCallback("toolbarInitialized"),Z.Viewer.validateViewerReady("toolbarInitialized"))})();this.z747=function(){return c};this.show=function(a){tbS&&(tbS.display=a?"inline-block":"none")}};
Z.NetConnector=function(){function a(a,d,f,h,n,r,u){var p=b();if(null===p)Z.Utils.showMessage(Z.Utils.getResource("z295"));else{if(f="function"===typeof d){var t=d;d=function(){window.setTimeout(Z.Utils.createCallback(null,t,p),1)};p.onreadystatechange=function(){4==p.readyState&&(p.onreadystatechange=new Function,d())}}try{p.open("GET",a,f),p.send(null)}catch(R){c(R,a,h),p=null,console.log(R)}}}function b(){var a=null;switch(Z.xmlHttpRequestSupport){case "XMLHttpRequest":a=new XMLHttpRequest;break;
case "Msxml2.XMLHTTP.6.0":a=new ActiveXObject("Msxml2.XMLHTTP.6.0");break;case "Msxml2.XMLHTTP.3.0":a=new ActiveXObject("Msxml2.XMLHTTP.3.0");break;case "Microsoft.XMLHTTP":a=new ActiveXObject("Microsoft.XMLHTTP")}return a}function c(a,b,c){1==Z.localUse&&(Z.browser==Z.browsers.CHROME||Z.browser==Z.browsers.OPERA||Z.browser==Z.browsers.IE&&11==Z.browserVersion||Z.browser==Z.browsers.SAFARI&&7<=Z.browserVersion)?Z.Utils.showMessage(Z.Utils.getResource("z288"),!1,Z.messageDurationStandard,"center"):
-1!=b.indexOf("ImageProperties.xml")?Z.Utils.showMessage(Z.Utils.getResource("z256-IMAGEXML"),!0,null,"left"):-1!=b.toLowerCase().indexOf("reply_data")?Z.Utils.showMessage(Z.Utils.getResource("z256-IMAGEOFFSET"),!1,Z.messageDurationShort,"center"):Z.Utils.showMessage(Z.Utils.getResource("z256"),!1,Z.messageDurationShort,"center")}function d(a,b){if(a)if(200!==a.status&&0!==a.status&&206!==a.status){var c=a.status,d=404==c?"Not Found":a.statusText;Z.Utils.showMessage(Z.Utils.getResource("z273")+c+
" - "+d,!1,Z.messageDurationShort,"center")}else a.responseXML&&a.responseXML.documentElement&&((c=a.responseXML)&&c.documentElement?"IMAGE_PROPERTIES"==c.documentElement.tagName?Z.Viewport.z602(c):Z.Utils.showMessage(Z.Utils.getResource("z296"),!0):Z.Utils.showMessage(Z.Utils.getResource("z293"),!0));else Z.Utils.showMessage(Z.Utils.getResource("z272"),!1,Z.messageDurationShort,"center")}function f(a,b,c,d){if(n<E)return n++,b=Z.Utils.createCallback(null,h,b),(new u(a,b,c)).start(),!0;-1==Z.Utils.arrayIndexOfObjectValue(A,
"sc",a)&&(A[A.length]={sc:a,cb:b,ct:c,t:d},r||(r=window.setInterval(function(){var a=A[0];f(a.sc,a.cb,a.ct,a.t)&&(A=Z.Utils.arraySplice(A,0,1));0==A.length&&r&&(window.clearInterval(r),r=null)},O)));return!1}function h(a,b,c){n--;if("function"===typeof a)try{a(c)}catch(w){Z.Utils.showMessage(w.name+Z.Utils.getResource("z245")+b+" "+w.message,!0)}}function u(a,b,c){function d(c){f.onload=null;f.onabort=null;f.onerror=null;h&&window.clearTimeout(h);window.setTimeout(function(){b(a,c?f:null)},1)}var f=
null,h=null;this.start=function(){f=new Image;var b=function(){d(!1)};f.onload=function(){d(!0)};f.onabort=b;f.onerror=b;h=window.setTimeout(function(){console.log(Z.Utils.getResource("z253"));d(!1);Z.Viewport.traceDebugValues("imageRequestTimeout",c+" timeout: "+a)},S);f.src=a}}var n=0,E=parseInt(Z.Utils.getResource("z140"),10),S=parseFloat(Z.Utils.getResource("z139")),O=Z.Utils.getResource("z708"),r,A=[];this.loadXML=function(b,c){"undefined"===typeof c||null===c?a(b,d,null):a(b,function(a){d(a,
c)},null)};this.loadImage=function(a,b,c,d){f(a,b,c,d)}};
Z.Utils={addCrossBrowserMethods:function(){document.addEventListener?(this.disableTextInteraction=function(a){if(a){var b=a.parentNode.style;b&&(a.parentNode.unselectable="on",b.userSelect="none",b.MozUserSelect="none",b.webkitUserSelect="none",b.webkitTouchCallout="none",b.webkitTapHighlightColor="transparent")}},this.renderQuality=function(a,b){b&&a.style.setProperty("image-rendering","high"==b?"optimizeQuality":"optimizeSpeed",null)},this.setOpacity=function(a,b,c){Z.alphaSupported?a.style.opacity=
b:c&&(a.style.backgroundColor=c)}):document.attachEvent&&(this.disableTextInteraction=function(a){a&&(a.parentNode.unselectable="on",a.parentNode.onselectstart=function(){return!1})},this.renderQuality=function(a,b){b&&(a.style.msInterpolationMode="high"==b?"bicubic":"nearest-neighbor")},this.setOpacity=function(a,b,c){Z.alphaSupported?(b*=100,a.style.zoom=1,a.style.filter="progid:DXImageTransform.Microsoft.Alpha(Opacity="+b+")",a.style.filter="alpha(opacity="+b+")",100==b&&(a.style.filter="")):c&&
(a.style.backgroundColor=c)})},addCrossBrowserEvents:function(){document.addEventListener?(this.addEventListener=function(a,b,c){a&&("mousewheel"==b&&a.addEventListener("DOMMouseScroll",c,!1),a.addEventListener(b,c,!1))},this.removeEventListener=function(a,b,c){a&&("mousewheel"==b&&a.removeEventListener("DOMMouseScroll",c,!1),a.removeEventListener(b,c,!1))},this.event=function(a){return a},this.target=function(a){return a.target},this.relatedTarget=function(a){return a.relatedTarget},this.isRightMouseButton=
function(a){var b=!1;if(2==a.which||3==a.which)b=!0;return b},this.preventDefault=function(a){a.preventDefault()},this.stopPropagation=function(a){a.stopPropagation()}):document.attachEvent&&(this.addEventListener=function(a,b,c){if(-1==this._findListener(a,b,c)){var d=function(){var b=window.event;Function.prototype.call?c.call(a,b):(a._currentListener=c,a._currentListener(b),a._currentListener=null)};a.attachEvent("on"+b,d);b={target:a,eventName:b,handler:c,handler2:d};var d=(a.document||a).parentWindow,
f="l"+this._listenerCounter++;d._allListeners||(d._allListeners={});d._allListeners[f]=b;a._listeners||(a._listeners=[]);a._listeners[a._listeners.length]=f;d._unloadListenerAdded||(d._unloadListenerAdded=!0,d.attachEvent("onunload",this._removeAllListeners))}},this.removeEventListener=function(a,b,c){if(a&&(c=this._findListener(a,b,c),-1!=c)){var d=(a.document||a).parentWindow,f=a._listeners[c];a.detachEvent("on"+b,d._allListeners[f].handler2);a._listeners=Z.Utils.arraySplice(a._listeners,c,1);delete d._allListeners[f]}},
this.event=function(a){return window.event},this.target=function(a){return a.srcElement},this.relatedTarget=function(a){var b=null;"mouseover"==a.type?b=a.fromElement:"mouseout"==a.type&&(b=a.toElement);return b},this.isRightMouseButton=function(a){var b=!1;2==a.button&&(b=!0);return b},this.preventDefault=function(a){a&&(a.returnValue=!1)},this.stopPropagation=function(a){a.cancelBubble=!0},this._findListener=function(a,b,c){var d=a._listeners;if(!d)return-1;a=(a.document||a).parentWindow;for(var f=
d.length-1;0<=f;f--){var h=a._allListeners[d[f]];if(h&&h.eventName==b&&h.handler==c)return f}return-1},this._removeAllListeners=function(){for(id in this._allListeners){var a=this._allListeners[id];a.target.detachEvent("on"+a.eventName,a.handler2);delete this._allListeners[id]}},this._listenerCounter=0)},declareGlobals:function(){Z.pageContainerID=null;Z.imagePath=null;Z.cacheProofCounter=0;Z.timerCounter=0;Z.browsers=null;Z.browser=null;Z.browserVersion=null;Z.scaleThreshold=null;Z.canvasSupported=
null;Z.cssTransformsSupported=null;Z.cssTransformProperty=null;Z.cssTransformNoUnits=null;Z.alphaSupported=null;Z.renderQuality=null;Z.xmlHttpRequestSupport=null;Z.touchSupport=null;Z.mobileDevice=null;Z.localUse=null;Z.initialX=null;Z.initialY=null;Z.initialZ=null;Z.initialZoom=null;Z.minZ=null;Z.minZoom=null;Z.maxZ=null;Z.maxZoom=null;Z.zoomSpeed=null;Z.panSpeed=null;Z.initialR=null;Z.smoothPan=null;Z.smoothPanEasing=null;Z.smoothZoom=null;Z.smoothZoomEasing=null;Z.smoothPanGlide=null;Z.fadeIn=
null;Z.fadeInSpeed=null;Z.toolbarInternal=null;Z.toolbarAutoShowHide=null;Z.toolbarW=null;Z.toolbarH=null;Z.clickZoom=null;Z.doubleClickZoom=null;Z.doubleClickDelay=null;Z.clickPan=null;Z.mousePan=null;Z.keys=null;Z.z744=null;Z.z744Limit=null;Z.z744Strict=null;Z.panBuffer=null;Z.tooltipsVisible=null;Z.minimizeVisible=null;Z.panButtonsVisible=null;Z.resetVisible=null;Z.messagesVisible=null;Z.canvas=null;Z.baseZIndex=null;Z.debug=null;Z.imageProperties=null;Z.tileW=null;Z.tileH=null;Z.tileType="jpg";
Z.tileSource=null;Z.xmlCallbackFunction=null;Z.mouseWheelParmeterProvided=null;Z.mouseWheel=null;Z.messageDurationLong=parseInt(Z.Utils.getResource("z709"),10);Z.messageDurationStandard=parseInt(Z.Utils.getResource("z711"),10);Z.messageDurationShort=parseInt(Z.Utils.getResource("z710"),10);Z.messageDurationVeryShort=parseInt(Z.Utils.getResource("z712"),10);Z.Viewer=null;Z.ViewerDisplay=null;Z.Viewport=null;Z.Toolbar=null;Z.ToolbarDisplay=null;Z.MessageDisplay=null;Z.messages=null;Z.messageDisplayList=
[];Z.coordinates=null;Z.imageW=null;Z.imageH=null;Z.imageD=null;Z.imageCtrX=null;Z.imageCtrY=null;Z.imageX=0;Z.imageY=0;Z.imageZ=0;Z.imageR=0;Z.priorX=0;Z.priorY=0;Z.priorZ=0;Z.priorR=0;Z.preventDupCall=!1;Z.fitZ=null;Z.fillZ=null;Z.zooming="stop";Z.panningX="stop";Z.panningY="stop";Z.interactive=!0;Z.useCanvas=!0;Z.mouseIsDown=!1;Z.buttonIsDown=!1;Z.keyIsDown=!1;Z.mouseWheelIsDown=!1;Z.mouseWheelCompleteDuration=null;Z.mouseWheelCompleteTimer=null;Z.mouseOutDownPoint=null;Z.viewportCurrentID=0;Z.viewportCurrent=
null;Z.viewportChangeTimeout=null},detectBrowserFeatures:function(){Z.browsers={UNKNOWN:0,IE:1,FIREFOX:2,SAFARI:3,CHROME:4,OPERA:5,EDGE:6};var a=Z.browsers.UNKNOWN,b=0,c=1E4,d=navigator.appName,f=navigator.appVersion,h=!1,u=!1,n=navigator.userAgent.toLowerCase();if(-1!=n.indexOf("edge"))a=Z.browsers.EDGE,b=f;else if("Microsoft Internet Explorer"==d&&window.attachEvent&&window.ActiveXObject)b=n.indexOf("msie"),a=Z.browsers.IE,b=parseFloat(n.substring(b+5,n.indexOf(";",b))),h="undefined"!==typeof document.documentMode;
else if("Netscape"==d&&-1!=n.indexOf("trident"))a=Z.browsers.IE,b=11;else if("Netscape"==d&&window.addEventListener){var E=n.indexOf("firefox"),d=n.indexOf("safari"),f=n.indexOf("chrome");0<=E?(a=Z.browsers.FIREFOX,b=parseFloat(n.substring(E+8)),c=1E4):0<=d&&(c=n.substring(0,d).lastIndexOf("/"),a=0<=f?Z.browsers.CHROME:Z.browsers.SAFARI,b=parseFloat(n.substring(c+1,d)),c=1E4);d=new Image;d.style.getPropertyValue&&(u=d.style.getPropertyValue("image-rendering"))}else"Opera"==d&&window.opera&&"[object Opera]"==
Object.prototype.toString.call(window.opera)&&(a=Z.browsers.OPERA,b=parseFloat(f));var S;if(window.XMLHttpRequest)netReq=new XMLHttpRequest,S="XMLHttpRequest";else if(window.ActiveXObject)for(d=["Msxml2.XMLHTTP.6.0","Msxml2.XMLHTTP.3.0","Microsoft.XMLHTTP"],f=0,E=d.length;f<E;f++)try{netReq=new ActiveXObject(d[f]);S=d[f];break}catch(ba){}for(var d=document.createElement("canvas"),d=!(!d.getContext||!d.getContext("2d")),f=!(a==Z.browsers.SAFARI&&4>b||a==Z.browsers.CHROME&&2>b),d=d&&f,f=!(a==Z.browsers.CHROME&&
2>b),u=h||u?"high":null,O=(document.documentElement||{}).style||{},h=!1,r=["transform","WebkitTransform","MozTransform","OTransform","msTransform"],A;E=r.shift();)if("undefined"!==typeof O[E]){h=!0;A=/webkit/i.test(E);break}var O="ontouchstart"in window||window.DocumentTouch&&document instanceof DocumentTouch||0<navigator.maxTouchPoints||0<navigator.msMaxTouchPoints,r=-1<n.indexOf("iphone")||-1<n.indexOf("ipad")||-1<n.indexOf("ipod"),n=-1<n.indexOf("android")||r,r=Array.prototype.splice,p;switch(window.location.protocol){case "http:":p=
!1;break;case "https:":p=!1;break;case "file:":p=!0;break;default:p=null}Z.browser=a;Z.browserVersion=b;Z.scaleThreshold=c;Z.xmlHttpRequestSupport=S;Z.canvasSupported=d;Z.useCanvas=Z.canvasSupported;Z.cssTransformsSupported=h;Z.cssTransformProperty=E;Z.cssTransformNoUnits=A;Z.alphaSupported=f;Z.renderQuality=u;Z.arraySpliceSupported=r;Z.touchSupport=O;Z.mobileDevice=n;Z.localUse=p},setParameters:function(){isNaN(parseFloat(this.getResource("z143")))||(Z.initialX=parseFloat(this.getResource("z143")));
isNaN(parseFloat(this.getResource("z144")))||(Z.initialY=parseFloat(this.getResource("z144")));isNaN(parseFloat(this.getResource("z145")))||(Z.initialZ=parseFloat(this.getResource("z145")));isNaN(parseFloat(this.getResource("z163")))||(Z.minZ=parseFloat(this.getResource("z163")));isNaN(parseFloat(this.getResource("z153")))||(Z.maxZ=parseFloat(this.getResource("z153")));isNaN(parseFloat(this.getResource("z241")))||(Z.zoomSpeed=parseFloat(this.getResource("z241")));isNaN(parseFloat(this.getResource("z175")))||
(Z.panSpeed=parseFloat(this.getResource("z175")));isNaN(parseFloat(this.getResource("z111")))||(Z.fadeInSpeed=parseFloat(this.getResource("z111")));Z.fadeIn=0<Z.fadeInSpeed;Z.clickZoom="0"!=this.getResource("z93");Z.doubleClickZoom="0"!=this.getResource("z707");Z.doubleClickDelay=parseFloat(this.getResource("z706"));Z.clickPan="0"!=this.getResource("z92");Z.mousePan="0"!=this.getResource("z164");Z.z744="0"!=this.getResource("z95");Z.z744Limit=parseInt(this.getResource("z95LIMIT"),10);Z.z744Strict=
"0"!=this.getResource("z95STRICT");Z.panBuffer=parseFloat(this.getResource("z173"));Z.smoothPan=Z.useCanvas&&"0"!=this.getResource("DEFAULT_SMOOTHPAN");Z.smoothPanEasing=parseInt(this.getResource("z719"),10);Z.smoothPanGlide=parseInt(this.getResource("z720"),10);Z.smoothZoom="0"!=this.getResource("DEFAULT_SMOOTHZOOM");Z.smoothZoomEasing=parseInt(this.getResource("z721"),10);Z.keys="0"!=this.getResource("z146");Z.canvas="0"!=this.getResource("z88");Z.baseZIndex=parseInt(this.getResource("z705"),10);
Z.mouseWheel=parseInt(this.getResource("DEFAULT_MOUSEWHEEL"),10);Z.messagesVisible="0"!=this.getResource("z713");var a;(a=document.getElementById(Z.pageContainerID))&&Z.Utils.getElementStyle(a);Z.Utils.validateImagePath()},validateImagePath:function(a){null!==("undefined"!==typeof a&&Z.Utils.stringValidate(a)?a:Z.imagePath)&&(Z.tileSource="ZoomifyImageFolder")},clearImageParameters:function(){Z.imagePath=null;Z.initialX=null;Z.initialY=null;Z.initialZ=null;Z.minZ=null;Z.maxZ=null;Z.initialR=null;
Z.mouseWheelParmeterProvided=null;Z.mouseWheel=null;Z.imageW=null;Z.imageH=null;Z.imageD=null;Z.imageCtrX=null;Z.imageCtrY=null;Z.imageX=0;Z.imageY=0;Z.imageZ=0;Z.imageR=0;Z.fitZ=null;Z.fillZ=null;Z.zooming="stop";Z.panningX="stop";Z.panningY="stop"},getResource:function(a){var b="";switch(a){case "z213":b="Support for Zoomify Image File storage and other special storage options is enabled only in the Zoomify Image Viewer included in the Zoomify Express, Pro, and Enterprise products.";break;case "DEFAULT_MULTIIMAGESUPPORTDISABLEDALERT":b=
"Support for multi-image display features is enabled only in the Zoomify Image Viewer included in the Zoomify Pro and Enterprise products.";break;case "z221":b="256";break;case "z219":b="256";break;case "z140":b="300";break;case "z139":b="60000";break;case "z708":b="100";break;case "z218":b="1.15";break;case "z220":b="300";break;case "z81":b="6";break;case "z78":b="3";break;case "z80":b="5";break;case "z77":b="3";break;case "z79":b="3";break;case "z76":b="2";break;case "z75":b="0";break;case "z173":b=
Z.mobileDevice?"1":"1.5";break;case "DEFAULT_z310SIZEMAXBROWSER":b="10000";break;case "z74":reTxt=Z.mobileDevice?"1":"2";break;case "z88":b="1";break;case "z705":b="2000";break;case "z725":b="2";break;case "z724":b="1000";break;case "z716":b=4;break;case "z715":b=500;break;case "z714":b=4;break;case "z723":b=Z.mobileDevice?6:4;break;case "z722":b=500;break;case "z175":b="5";break;case "z176":b="10";break;case "z241":b="5";break;case "z242":b="0.02";break;case "z238":b="30";break;case "z240":b="20";
break;case "z239":b="800";break;case "z93TIERSKIPTHRESHOLD":b="0.2";break;case "z122":b="10";break;case "DEFAULT_MOUSEWHEEL":b="1";break;case "z717":b="1";break;case "z718":b="1";break;case "z165":b="300";break;case "z111":b="5";break;case "z112":b="0.067";break;case "z146":b="1";break;case "z164":b="1";break;case "z92":b="1";break;case "z93":b="1";break;case "z707":b="1";break;case "z706":b="250";break;case "z95":b="1";break;case "z95LIMIT":b="2";break;case "z95STRICT":b="0";break;case "DEFAULT_SMOOTHPAN":b=
"1";break;case "z719":b="2";break;case "z720":b="2";break;case "DEFAULT_SMOOTHZOOM":b="1";break;case "z721":b="2";break;case "z143":b=null;break;case "z144":b=null;break;case "z145":b=null;break;case "z163":b=null;break;case "z153":b="1";break;case "z83":b="#FBFAFA";break;case "z83NOALPHA":b="#FBFAFA";break;case "z83LIGHT":b="#FEFEFE";break;case "z82":b="0.75";break;case "z704":b="0.75";break;case "z87":b="#C0C0C0";break;case "z713":b="1";break;case "z159":b="lightgray";break;case "z158":b="white";
break;case "z709":b="5000";break;case "z711":b="3000";break;case "z710":b="1500";break;case "z712":b="750";break;case "z726":b="error";break;case "z288":b="Use Firefox for local viewing or see READ ME FIRST\nfile for optional settings for other browsers.";break;case "z249":b="Image failed to load: possible invalid path, missing image, or network error.";break;case "z280":b="Sorry!  Part of this view is not refreshing.  The network may be slow, or the website may be missing a file:  ";break;case "z727":b=
"Sorry!  Part of this view is not refreshing. The network\nmay be slow, or the website may be missing a file.  ";break;case "z295":b="Browser does not support XMLHttpRequest.";break;case "z256-IMAGEXML":b="Error loading image: please make sure image path in web page matches image folder location on webserver.";break;case "z256":b="Error making network request:\npossible invalid path or network error.";break;case "z272":b="Error related to network security: ";break;case "z273":b="Error related to network status: ";
break;case "z294":b="Browser does not support XML DOM.";break;case "z293":b="XML Doc invalid.";break;case "z296":b="XML invalid.";break;case "z255":b="Image XML invalid.";break;case "z252":b="Image properties XML invalid.";break;case "z250":b="Image properties invalid.";break;case "z254":b="Image tile count does not match value in image XML. If the count is invalid display problems can result.";break;case "z245":b=" while executing callback: ";break;case "z253":b="\nImage tile request not fulfilled within time period expected";
break;case "z283":b="Unknown element style - no known method to identify.";break;case "z284":b="Unknown mouse position - no known method to calculate.";break;case "z285":b="Unknown mouse scroll - no known method to calculate.";break;case "z286":b="Unknown window size - no known method to calculate.";break;case "z400":b="Zoom Out";break;case "z378":b="Reset Initial View";break;case "z399":b="Zoom In";break;case "z362":b="Accept And Close Message";break;case "z361":b="Decline And Close Message";break;
case "z427":b="http://www.zoomify.com";break;case "z728":b="0.75";break;case "z729":b="lightgray";break;case "z733":b="white";break;case "z731":b="lightgray";break;case "z730":b="darkgray";break;case "z734":b="+";break;case "z732":b="Z";break;case "z735":b="-";break;case "z437":b="430";break;case "z436":b="84";break;case "z435":b="Cancel";break;case "z438":b="OK";break;default:b="Unexpected resource request"}return b},clearDisplay:function(a){if(a)if(Z.useCanvas&&"CANVAS"==a.tagName)Z.Utils.clearCanvas(a);
else for(;a.hasChildNodes();)a.removeChild(a.lastChild)},clearCanvas:function(a){a=a.getContext("2d");a.save();try{a.setTransform(1,0,0,1,0,0)}catch(b){console.log("In function clearCanvas setting transform on canvas:  "+b)}a.clearRect(0,0,a.canvas.width,a.canvas.height);a.restore()},createCallback:function(a,b){for(var c=[],d=2,f=arguments.length;d<f;d++)c[c.length]=arguments[d];return function(){for(var d=c.concat([]),f=0,n=arguments.length;f<n;f++)d[d.length]=arguments[f];return b.apply(a,d)}},
validateCallback:function(a){"undefined"===typeof Z.callbacks&&(Z.callbacks=[]);var b=Z.callbacks.slice(0);Z.Utils.functionCallWithDelay(function(){Z.Utils.validateCallbackDelayed(a,b)},10)},validateCallbackDelayed:function(a,b){for(var c=0,d=b.length;c<d;c++){var f=b[c];f&&f.callbackEvent==a&&"object"===typeof f&&"function"===typeof f.callbackFunction&&f.callbackFunction()}Z.Utils.arrayClear(b)},getContainerSize:function(a,b){var c=Z.Utils.getElementStyle(a),d=parseFloat(c.width),f=parseFloat(c.height);
Z.Utils.stringValidate(c.width)&&-1!=c.width.indexOf("%")&&(d=parseFloat(Z.Utils.getElementStyleProperty(a,"width")));Z.Utils.stringValidate(c.height)&&-1!=c.height.indexOf("%")&&(f=parseFloat(Z.Utils.getElementStyleProperty(a,"height")));isNaN(d)&&(d=b.clientWidth);isNaN(f)&&(f=b.clientHeight);if(0==d||0==f)winDimensions=Z.Utils.getWindowSize(),0==d&&(a.parentNode.style.width=winDimensions.x+"px",d=a.clientWidth),0==f&&(a.parentNode.style.height=winDimensions.y+"px",f=a.clientHeight);if(isNaN(d)||
0==d)d=800;if(isNaN(f)||0==f)f=400;return new Z.Utils.Point(d,f)},createContainerElement:function(a,b,c,d,f,h,u,n,E,S,O,r,A,p,ba,t,w){var L=document.createElement(a);this.stringValidate(b)&&(L.id=b);b=L.style;b.display=this.stringValidate(c)?c:"inline-block";b.position=this.stringValidate(d)?d:"static";b.overflow=this.stringValidate(f)?f:"hidden";"canvas"==a?(this.stringValidate(h)&&L.setAttribute("width",h),this.stringValidate(u)&&L.setAttribute("height",u)):(this.stringValidate(h)&&(b.width=h),
this.stringValidate(u)&&(b.height=u));this.stringValidate(n)&&(b.left=n);this.stringValidate(E)&&(b.top=E);b.borderStyle=this.stringValidate(S)?S:"none";b.borderWidth=this.stringValidate(O)?O:"0px";b.borderColor="#696969";b.background=this.stringValidate(r)?r:"transparent none";b.margin=this.stringValidate(A)?A:"0px";b.padding=this.stringValidate(p)?p:"0px";b.whiteSpace=this.stringValidate(ba)?ba:"normal";this.stringValidate(t)&&(b.cursor=t);"undefined"!==w&&w&&(Z.Utils.addEventListener(L,"touchstart",
Z.Utils.preventDefault),Z.Utils.addEventListener(L,"mousedown",Z.Utils.preventDefault),Z.Utils.addEventListener(L,"contextmenu",Z.Utils.preventDefault));return L},createCenteredElement:function(a,b){var c=this.createContainerElement("div"),d=[];d[d.length]='<div style="#position:relative; display:table; height:100%; width:100%; border:none; margin:0px; padding:0px; overflow:hidden; text-align:left;">';d[d.length]='<div style="#position:absolute; display:table-cell; #top:50%; width:100%; border:none; margin:0px; padding:0px; vertical-align:middle;">';
d[d.length]='<div id="'+b+'"; style="#position:relative; width:100%; #top:-50%; border:none; margin:0px; padding:0px; text-align:center;"></div></div></div>';c.innerHTML=d.join("");for(var d=c=c.firstChild,f=c.getElementsByTagName("div");0<f.length;)d=f[0],f=d.getElementsByTagName("div");d.appendChild(a);return c},createTextElement:function(a,b,c,d,f,h,u,n,E,S,O,r,A,p,ba,t,w,L){c=Z.Utils.createContainerElement("div","textBoxFor-"+a,"inline-block","absolute","hidden",c,d,f,h,n,E,"white","0px",u,"normal");
d=document.createElement("textarea");c.appendChild(d);f=d.style;d.id=a;d.value=b;d.readOnly=S;f.width="100%";f.height="100%";f.margin="0";f.border="0";this.stringValidate(O)&&(f.fontFamily=O);this.stringValidate(r)&&(f.fontSize=r);this.stringValidate(A)&&(f.resize=A);this.stringValidate(p)&&(d.columns=p);this.stringValidate(ba)&&(d.rows=ba);this.stringValidate(t)&&(f.overflowX=t);this.stringValidate(w)&&(f.overflowY=w);this.stringValidate(L)&&(d.wrap=L,"off"==L&&(f.whiteSpace="nowrap"));return c},
getElementPosition:function(a){for(var b=0,c=0,d="fixed"==this.getElementStyle(a).position,f=this.getOffsetParent(a,d);f;)b+=a.offsetLeft,c+=a.offsetTop,d&&(a=this.getPageScroll(),b+=a.x,c+=a.y),a=f,d="fixed"==this.getElementStyle(a).position,f=this.getOffsetParent(a,d);return new this.Point(b,c)},getOffsetParent:function(a,b){return b&&a!=document.body?document.body:a.offsetParent},getElementStyle:function(a){if(a.currentStyle)return a.currentStyle;if(window.getComputedStyle)return window.getComputedStyle(a,
"");this.showMessage(this.getResource("z283"))},getElementStyleProperty:function(a,b){if(window.getComputedStyle)return window.getComputedStyle(a,null).getPropertyValue(b);if(a.currentStyle)return a.currentStyle[b];this.showMessage(this.getResource("z283"))},getEventTargetCoords:function(a){return getElementPosition(Z.Utils.target(a))},getFirstTouch:function(a){var b=null,c=a.touches;a=a.changedTouches;"undefined"!==typeof c?b=c[0]:"undefined"!==typeof a&&(b=a[0]);return b},getMousePosition:function(a){var b=
0,c=0;"DOMMouseScroll"==a.type&&Z.browser==Z.browsers.FIREFOX&&3>Z.browserVersion?(b=a.screenX,c=a.screenY):"number"===typeof a.pageX?(b=a.pageX,c=a.pageY):"number"===typeof a.clientX?(b=a.clientX+document.body.scrollLeft+document.documentElement.scrollLeft,c=a.clientY+document.body.scrollTop+document.documentElement.scrollTop):console.log(this.getResource("z284"));return new this.Point(b,c)},getMouseScroll:function(a){var b=0;"number"===typeof a.wheelDelta?b=a.wheelDelta:"number"===typeof a.detail?
b=-1*a.detail:this.showMessage(this.getResource("z285"));return b?b/Math.abs(b):0},getPageScroll:function(){var a=0,b=0,c=document.documentElement||{},d=document.body||{};if("number"===typeof window.pageXOffset)a=window.pageXOffset,b=window.pageYOffset;else if(d.scrollLeft||d.scrollTop)a=d.scrollLeft,b=d.scrollTop;else if(c.scrollLeft||c.scrollTop)a=c.scrollLeft,b=c.scrollTop;return new this.Point(a,b)},getWindowSize:function(){var a=0,b=0,c=document.documentElement||{},d=document.body||{};"number"===
typeof window.innerWidth?(a=window.innerWidth,b=window.innerHeight):c.clientWidth||c.clientHeight?(a=c.clientWidth,b=c.clientHeight):d.clientWidth||d.clientHeight?(a=d.clientWidth,b=d.clientHeight):this.showMessage(this.getResource("z286"));return new this.Point(a,b)},Button:function(a,b,c,d,f,h,u,n,E,S,O,r,A,p,ba,t,w,L,tb,ib){a=Z.Utils.createContainerElement("span",a,"inline-block","absolute","hidden",u,n,E,S,p,ba,t,w,L,tb,ib);if(Z.Utils.stringValidate(b)){var Xa=document.createTextNode(b);a.appendChild(Z.Utils.createCenteredElement(Xa));
Z.Utils.setTextNodeStyle(Xa,"black","verdana","13px","none","normal","normal","normal","normal","1em","center","none")}else{c=Z.Utils.stringRemoveTrailingSlashCharacters(c);var ua=Z.Utils.createGraphicElement(c+"/"+d),R=Z.Utils.createGraphicElement(c+"/"+f),wa=Z.Utils.createGraphicElement(c+"/"+h);ua.style.width=R.style.width=wa.style.width=u;ua.style.height=R.style.height=wa.style.height=n;ua.style.position=R.style.position=wa.style.position="absolute";Z.browser==Z.browsers.FIREFOX&&3>Z.browserVersion&&
(ua.style.top=R.style.top=wa.style.top="");R.style.visibility=wa.style.visibility="hidden";ua.alt=R.alt=wa.alt="";"undefined"!==typeof A&&Z.Utils.stringValidate(A)&&(ua.alt=Z.Utils.getResource(A));a.appendChild(ua);a.appendChild(R);a.appendChild(wa)}Z.Utils.addEventListener(a,"mousedown",Z.Utils.preventDefault);Z.Utils.addEventListener(a,"mouseover",Z.Utils.stopPropagation);Z.Utils.addEventListener(a,"mousedown",Z.Utils.stopPropagation);Z.Utils.addEventListener(a,"mouseup",Z.Utils.stopPropagation);
Z.Utils.addEventListener(a,"mouseout",Z.Utils.stopPropagation);"undefined"!==typeof imageUp&&(Z.Utils.addEventListener(ua,"contextmenu",Z.Utils.preventDefault),Z.Utils.addEventListener(R,"contextmenu",Z.Utils.preventDefault),Z.Utils.addEventListener(wa,"contextmenu",Z.Utils.preventDefault));Z.Utils.addEventListener(a,"touchstart",Z.Utils.preventDefault);Z.Utils.addEventListener(a,"touchend",Z.Utils.preventDefault);Z.Utils.addEventListener(a,"touchcancel",Z.Utils.preventDefault);Z.Utils.stringValidate(b)||
(Z.Utils.disableTextInteraction(Xa),Z.Utils.addEventListener(a,"contextmenu",Z.Utils.preventDefault));Z.tooltipsVisible&&Z.Utils.stringValidate(A)&&(a.title=Z.Utils.getResource(A));Z.Utils.setButtonHandler(a,O,r);this.elmt=a},buttonSize:function(a,b,c){var d=a.style;d.width=b+"px";d.height=c+"px";c=a.firstChild;d=a.childNodes[1];a=a.childNodes[2];c&&d&&a&&(c.style.width=d.style.width=a.style.width=b+"px",c.style.height=d.style.height=a.style.height=b+"px")},setButtonDefaults:function(a){Z.Utils.clearButtonSettings(a);
Z.Utils.setButtonState(a,"up");Z.Utils.setButtonHandler(a,"mouseover",Z.Toolbar.z457)},clearButtonSettings:function(a){var b=a.firstChild,c=a.childNodes[1],d=a.childNodes[2];b&&c&&d&&(b.style.visibility=c.style.visibility=d.style.visibility="hidden",Z.Utils.removeEventListener(b,"mouseover",Z.Toolbar.z457),Z.Utils.removeEventListener(c,"mousedown",Z.Toolbar.z457),Z.Utils.removeEventListener(c,"mouseout",Z.Toolbar.z457),Z.Utils.removeEventListener(d,"mouseup",Z.Toolbar.z457),Z.Utils.removeEventListener(a,
"touchstart",Z.Toolbar.z457),Z.Utils.removeEventListener(a,"touchend",Z.Toolbar.z457),Z.Utils.removeEventListener(a,"touchcancel",Z.Toolbar.z457));Z.Utils.removeEventListener(a,"mouseover",Z.Toolbar.z457);Z.Utils.removeEventListener(a,"mousedown",Z.Toolbar.z457);Z.Utils.removeEventListener(a,"mouseout",Z.Toolbar.z457);Z.Utils.removeEventListener(a,"mouseup",Z.Toolbar.z457)},setButtonState:function(a,b){var c="up"==b?a.firstChild:"down"==b?a.childNodes[1]:a.childNodes[2];c&&(c.style.visibility="visible")},
setButtonHandler:function(a,b,c){c="undefined"!==c?c:Z.Toolbar.z457;var d="undefined"!==b?b:"mouseover";if("mouseover"==b&&"undefined"!==typeof a.firstChild)a=a.firstChild;else if("mousedown"!=b||"undefined"===typeof a.childNodes[1])"mouseup"==b&&"undefined"!==typeof a.childNodes[2]?a=a.childNodes[2]:"mouseout"==b&&"undefined"!==typeof a.childNodes[1]&&(a=a.childNodes[1]);Z.Utils.addEventListener(a,"mousedown"==b?"touchstart":"touchend",c);Z.Utils.addEventListener(a,d,c)},createGraphicElement:function(a){var b=
this.createContainerElement("img"),c=null;Z.browser==Z.browsers.IE&&7>Z.browserVersion?(c=this.createContainerElement("span",null,"inline-block"),b.onload=function(){c.style.width=c.style.width||b.width+"px";c.style.height=c.style.height||b.height+"px";b=b.onload=null},c.style.filter='progid:DXImageTransform.Microsoft.AlphaImageLoader(src="'+a+'", sizingMethod="scale")'):(c=b,c.src=a);return c},Point:function(a,b){this.x="number"===typeof a?a:0;this.y="number"===typeof b?b:0},Point3D:function(a,b,
c){this.x="number"===typeof a?a:0;this.y="number"===typeof b?b:0;this.z="number"===typeof c?c:0},stringValidate:function(a){return"undefined"!==typeof a&&null!==a&&""!==a&&"null"!==a},stringRemoveTrailingSlashCharacters:function(a){return"/"==a.slice(-1,a.length)?a.slice(0,a.length-1):a},setTextNodeStyle:function(a,b,c,d,f,h,u,n,E,S,O,r){a=a.parentNode.style;a.color=b;a.fontFamily=c;a.fontSize=d;a.fontSizeAdjust=f;a.fontStyle=h;a.fontStretch=u;a.fontVariant=n;a.fontWeight=E;a.lineHeight=S;a.textAlign=
O;a.textDecoration=r},arrayClear:function(a){if(a)for(;0<a.length;)a.pop()},arrayIndexOf:function(a,b,c){c?0>c&&(c=Math.max(0,a.length+c)):c=0;for(var d=a.length;c<d;c++)if(a[c]===b)return c;return-1},arrayIndexOfObjectValue:function(a,b,c,d){if("undefined"!==typeof a){d?0>d&&(d=Math.max(0,a.length+d)):d=0;for(var f=a.length;d<f;d++)if(a[d][b]===c)return d}return-1},arrayIndexOfObjectTwoValues:function(a,b,c,d,f,h){if("undefined"!==typeof a){d?0>d&&(d=Math.max(0,a.length+d)):d=0;for(var u=a.length;d<
u;d++)if(a[d][b]===c&&a[d][f].toString()===h.toString())return d}return-1},arraySplice:function(a,b,c){if(Z.arraySpliceSupported)if(3<arguments.length)for(var d=3,f=arguments.length;d<f;d++)a.splice(b,c,arguments[d]);else a.splice(b,c);else{0>c&&(c=0);var h=[];if(3<arguments.length)for(d=3,f=arguments.length;d<f;d++)h[h.length]=arguments[d];for(var d=Z.Utils.arraySubarray(a,0,b),u=Z.Utils.arraySubarrayLen(a,b,c),f=Z.Utils.arraySubarray(a,b+c),h=d.concat(h,f),d=a.length=0,f=h.length;d<f;d++)a[a.length]=
h[d];a=u}return a},arraySubarray:function(a,b,c){0>b&&(b=0);if(!c||c>a.length)c=a.length;if(b==c)return[];for(var d=[];b<c;b++)d[d.length]=a[b];return d},arraySubarrayLen:function(a,b,c){if(b>=a.length||c&&0>=c)return[];0>b&&(b=Math.abs(b)>a.length?0:a.length+b);if(!c||c+b>a.length)c=a.length-b;for(var d=[],f=b;f<b+c;f++)d[d.length]=a[f];return d},arrayUnique:function(a){for(var b=1;b<a.length;)a[b-1]==a[b]?a=Z.Utils.arraySplice(a,b,1):b++;return a},calculatePointsDistance:function(a,b,c,d){return Math.sqrt((a-=
c)*a+(b-=d)*b)},cacheProofPath:function(a){a+="?t"+(new Date).getTime().toString()+"n"+Z.cacheProofCounter.toString();Z.cacheProofCounter+=1;return a},easing:function(a,b,c,d,f){if("undefined"===typeof f||null===f)f=Z.smoothZoomEasing;var h=b;if(Z.smoothZoom&&1<f)switch(f){case 2:c/=d,c--,h=(b-a)*(c*c*c*c*c+1)+a}return h},functionCallWithDelay:function(a,b){window.setTimeout(a,b)},nodeIsInViewer:function(a){for(var b=!1;0==b;)if(a)a.id?"ViewerDisplay"==a.id?b=!0:a=a.parentNode:a=a.parentNode;else break;
return b},roundToFixed:function(a,b){var c=b-Math.round(a).toString().length,c=Math.pow(10,0>c?0:c);return a=Math.round(a*c)/c},configureMessageDisplay:function(){var a=parseInt(this.getResource("z437"),10),b=parseInt(this.getResource("z436"),10),c=Z.Utils.getMessageDisplayCoords("6",a,Z.viewerW,Z.viewerH),d=this.getResource("z159"),f=this.getResource("z158");Z.MessageDisplay=this.createContainerElement("div","MessageDisplay","inline-block","absolute","auto",a+"px",b+"px",c.x+"px",c.y+"px","solid",
"1px",d,"0px","0px","normal",null,!0);Z.ViewerDisplay.appendChild(Z.MessageDisplay);Z.MessageDisplay.style.zIndex=(Z.baseZIndex+30).toString();c=Z.Utils.createTextElement("messageBox","",a-18+"px",b-40+"px","4px","4px","4px","solid","1px",!0,"verdana","12px","none",null,1,"auto","auto",null);Z.MessageDisplay.appendChild(c);Z.messages=document.getElementById("messageBox");b=b-18-5;a-=66;c=this.getResource("z438");f=new Z.Utils.Button("buttonMessageOk",c,null,null,null,null,"56px","18px",a+"px",b+"px",
"mousedown",this.messageOkButtonHandler,"z362","solid","1px",f,"0px","0px");Z.MessageDisplay.appendChild(f.elmt)},getMessageDisplayCoords:function(a,b,c,d){return new Z.Utils.Point(40,d-120)},messageOkButtonHandler:function(a){Z.Utils.hideMessage();return!0},messageCancelButtonHandler:function(a){Z.Utils.hideMessage();return!1},showMessage:function(a,b,c,d,f,h){if(Z.messagesVisible){Z.MessageDisplay||Z.Utils.configureMessageDisplay();if("undefined"===typeof h||null===h)h="6";var u=parseInt(this.getResource("z437"),
10);h=Z.Utils.getMessageDisplayCoords(h,u,Z.viewerW,Z.viewerH);Z.MessageDisplay.style.left=h.x+"px";Z.MessageDisplay.style.top=h.y+"px";Z.MessageDisplay.messageTimer&&window.clearTimeout(MessageDisplay.messageTimer);h=!0;f&&(-1!=Z.Utils.arrayIndexOf(Z.messageDisplayList,a)?h=!1:Z.messageDisplayList[Z.messageDisplayList.length]=a);if(h&&(Z.messages&&(Z.messages.value=a),Z.MessageDisplay.style.display="inline-block","undefined"!==typeof d&&null!==d&&(a=document.getElementById("textBoxFor-messageBox"))&&
(a.firstChild.style.textAlign=d),d=document.getElementById("buttonMessageOk"),a=parseInt(this.getResource("z436"),10),"undefined"!==typeof b&&null!==b&&b?(d.style.display="inline-block",Z.MessageDisplay.style.height=a+"px"):(d.style.display="none",Z.MessageDisplay.style.height=a-22+"px"),"undefined"!==typeof c&&null!==c&&!isNaN(c))){"undefined"!==typeof Z.MessageDisplay.messageTimer&&null!==Z.MessageDisplay.messageTimer&&window.clearTimeout(Z.MessageDisplay.messageTimer);if("undefined"===typeof c||
null===c)c=3E3;Z.MessageDisplay.messageTimer=window.setTimeout(Z.Utils.hideMessageTimerHandler,c)}}},getMessage:function(){var a="";Z.messages&&Z.Utils.stringValidate(Z.messages.value)&&(a=Z.messages.value);return a},hideMessage:function(){Z.MessageDisplay&&(Z.MessageDisplay.style.display="none")},hideMessageTimerHandler:function(){Z.MessageDisplay.messageTimer&&(window.clearTimeout(Z.MessageDisplay.messageTimer),Z.MessageDisplay.messageTimer=null);Z.Utils.hideMessage()}};